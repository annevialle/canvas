var maPalette = ["#B0CC99","#677E52","#046380","#ABC8E2","#5EB6DD","#F6E8B1","#FFFFFF","#000000","#FFF168","#BD8D46","#B9121B","#E70739","#FFB6B8","#8FCF3C","#495CFF","#F9A41E","#FDD131","#4A2612","#8C5935","#FF8830","#FFBEAC","#E83C1A"];
var datas= [
	{
		path: "m 3.71875,2.90625 0,181.78125 C 4.7540754,183.80264 5.7672529,182.86878 6.8125,182 c 3.881048,-3.22581 7.851689,-6.33241 11.9375,-9.3125 4.085811,-2.98009 8.289819,-5.83468 12.6875,-8.53125 4.397681,-2.69657 8.995842,-5.24975 13.8125,-7.625 4.816658,-2.37525 9.844758,-4.57762 15.1875,-6.59375 5.342742,-2.01613 10.942603,-3.94834 16.75,-5.71875 5.807397,-1.77041 11.850051,-3.36391 18.09375,-4.75 6.2437,-1.38609 12.6921,-2.54309 19.34375,-3.40625 3.32583,-0.43158 6.7025,-0.78764 10.125,-1.0625 3.4225,-0.27486 6.89063,-0.49294 10.40625,-0.59375 3.51562,-0.10081 7.08229,-0.0906 10.6875,0 3.60521,0.0906 7.24625,0.26323 10.9375,0.5625 3.69125,0.29927 7.41376,0.7247 11.1875,1.25 3.77374,0.5253 7.5848,1.16885 11.4375,1.9375 3.8527,0.76865 7.7594,1.65817 11.6875,2.6875 3.9281,1.02933 7.87503,2.19267 11.875,3.5 3.99997,1.30733 8.05671,2.74108 12.125,4.34375 4.06829,1.60267 8.14819,3.36593 12.28125,5.28125 8.26613,3.83065 16.4615,7.98438 24.59375,12.28125 8.13225,4.29687 16.22908,8.73286 24.3125,13.21875 8.08342,4.48589 16.16161,9.00857 24.28125,13.40625 8.11964,4.39768 16.25907,8.68649 24.5,12.71875 4.12046,2.01613 8.27077,3.97096 12.4375,5.84375 4.16673,1.87279 8.37012,3.64894 12.59375,5.34375 4.22363,1.69481 8.45883,3.29908 12.75,4.78125 4.29117,1.48217 8.63067,2.85887 13,4.09375 4.36933,1.23488 8.76062,2.32831 13.21875,3.28125 4.45813,0.95294 8.9737,1.76991 13.53125,2.40625 4.55755,0.63634 9.17614,1.08991 13.84375,1.375 4.66761,0.28509 9.39919,0.38206 14.1875,0.28125 4.78831,-0.10081 9.48382,-0.32843 14.09375,-0.65625 4.60993,-0.32782 9.13489,-0.75123 13.5625,-1.28125 4.42761,-0.53002 8.75865,-1.16758 13,-1.875 4.24135,-0.70742 8.38634,-1.48375 12.4375,-2.34375 4.05116,-0.86 7.98672,-1.79347 11.84375,-2.78125 3.85703,-0.98778 7.62229,-2.03424 11.28125,-3.125 7.31792,-2.18151 14.24798,-4.52419 20.75,-6.96875 6.50202,-2.44456 12.59539,-4.99086 18.25,-7.5 5.65461,-2.50914 10.88054,-4.99975 15.65625,-7.375 9.55141,-4.7505 17.30948,-9.03831 23.15625,-12.0625 2.92339,-1.5121 6.34318,-3.54492 10.125,-5.9375 3.78182,-2.39258 7.92818,-5.12626 12.21875,-8.09375 8.58115,-5.93498 17.8256,-12.72379 26.34375,-19.125 3.95271,-2.97038 3.72054,-2.9083 7.21875,-5.59375 l 0,-145.375 -636.84375,0 z"
	},
	{
		path: "m 151.56392,66.840373 c 6.27272,-5.559912 10.54958,-8.126025 18.96072,-7.69834 8.41115,0.427686 20.52891,8.838835 18.81817,20.386345 -1.71074,11.54751 -11.83263,17.962793 -22.52477,17.67767 -10.69214,-0.285124 -14.99493,-7.888082 -14.69505,-8.997644 0.7128,-2.637394 1.18731,-3.726001 1.72192,-7.682093 -1.28306,9.26652 -4.56198,15.966927 -12.97313,17.535109 -8.41115,1.56818 -17.96279,-1.140496 -15.39668,-14.113625 -1.71074,14.541305 -6.70041,15.396685 -12.54544,17.820235 -5.84504,2.42355 -20.671472,0 -20.671472,-10.121895 C 90.547446,103.33621 79.28506,103.47877 76.291261,103.33621 73.297462,103.19365 60.752019,100.77009 60.609457,92.501506 60.466895,84.232919 69.020606,80.241187 77.431756,81.381682 66.597055,78.387883 66.311931,71.259791 67.02474,67.980868 67.73755,64.701945 74.72308,55.435425 85.415219,58.001538 80.995802,70.40442 87.981333,73.825904 87.981333,73.825904 81.195931,70.734266 84.437407,59.25039 86.9834,55.720549 90.020437,51.509909 101.21067,47.284941 108.36768,55.292863 102.239,46.939281 92.157382,52.382575 92.157382,52.382575 91.016887,45.539606 95.251987,30.914787 111.07635,29.63173 c 15.82437,-1.283057 22.38221,6.985531 23.52271,11.690072 1.14049,4.704541 -2.85124,9.836768 -5.55991,11.832633 7.55577,-5.987597 13.8285,-6.98553 21.09915,-3.278922 7.27065,3.706608 7.98346,11.975195 7.98346,11.975195 -4.74018,3.06508 -6.55784,4.989665 -6.55784,4.989665 z"
	},
	{
		path: "m 451.99781,50.478017 c 9.55164,-7.413216 20.10122,-5.274788 24.94832,-2.138427 4.8471,3.13636 7.55578,5.132226 7.27065,10.121891 -6.41528,0.427686 -10.12189,1.853304 -11.69007,2.566113 8.41115,-2.851237 13.8285,-3.564046 18.81817,0.997933 4.98966,4.56198 1.71074,8.696273 0.57024,11.690072 3.70661,-7.983463 1.99587,-7.413216 1.28306,-9.409082 4.70454,-0.142562 17.24998,4.561979 15.96693,12.973128 -1.28306,8.41115 -8.69628,14.683871 -18.24792,15.966928 -9.55164,1.283056 -17.96279,-1.853304 -18.6756,-4.989665 0.42768,7.270654 -11.11983,9.123958 -17.39255,8.981397 -6.27272,-0.142562 -20.5289,-1.853304 -25.09088,-7.555778 -1.56818,6.700407 -16.10949,8.268587 -19.8161,8.126025 -3.70661,-0.142562 -16.39461,-3.421484 -19.24585,-7.413216 -3.99173,5.132226 -18.53304,4.704541 -20.67147,4.419417 -2.13843,-0.285124 -16.25205,-3.278922 -13.8285,-17.535108 2.42355,-14.256185 18.24792,-13.971061 20.38635,-13.971061 2.13842,0 9.40908,0.997933 12.97312,3.991732 -6.55784,-8.411149 0.85538,-15.39668 3.42149,-16.96486 2.56611,-1.568181 12.11776,-5.987598 23.38014,2.566113 -13.8285,-12.402881 0.14256,-18.675603 2.56612,-19.816097 2.42355,-1.140495 23.95039,-6.272722 34.64253,-0.570248 10.69213,5.702474 5.21856,11.145966 4.70454,12.688005 -0.57025,1.710743 -6.27272,5.274788 -6.27272,5.274788 z"
	},
	{
		path: "m 398.5,126.9375 c -17.9828,0.13711 -36.36996,1.3881 -54.96875,3.65625 -51.39003,6.26708 -67.30545,15.50663 -99.0625,31.78125 2.49961,1.28244 5.01242,2.56063 7.5,3.875 8.13225,4.29687 16.22908,8.73286 24.3125,13.21875 8.08342,4.48589 16.16161,9.00857 24.28125,13.40625 8.11964,4.39768 16.25907,8.68649 24.5,12.71875 4.12046,2.01613 8.27077,3.97096 12.4375,5.84375 4.16673,1.87279 8.37012,3.64894 12.59375,5.34375 4.22363,1.69481 8.45883,3.29908 12.75,4.78125 4.29117,1.48217 8.63067,2.85887 13,4.09375 4.36933,1.23488 8.76062,2.32831 13.21875,3.28125 4.45813,0.95294 8.9737,1.76991 13.53125,2.40625 4.55755,0.63634 9.17614,1.08991 13.84375,1.375 4.66761,0.28525 9.39919,0.38206 14.1875,0.28125 4.78831,-0.10081 9.48382,-0.32843 14.09375,-0.65625 4.60993,-0.32782 9.13489,-0.75123 13.5625,-1.28125 4.42761,-0.53002 8.75865,-1.16758 13,-1.875 4.24135,-0.70742 8.38634,-1.48375 12.4375,-2.34375 4.05116,-0.86 7.98672,-1.79347 11.84375,-2.78125 3.85703,-0.98778 7.62229,-2.03424 11.28125,-3.125 7.31792,-2.18151 14.24798,-4.52419 20.75,-6.96875 6.50202,-2.44456 12.59539,-4.99086 18.25,-7.5 5.65461,-2.50914 10.88054,-4.99975 15.65625,-7.375 9.55141,-4.7505 17.30948,-9.03831 23.15625,-12.0625 2.24289,-1.16011 4.76466,-2.64331 7.53125,-4.34375 C 574.62838,173.00208 550.27562,160.31901 524.15625,149.125 487.63911,133.47479 444.45605,126.58711 398.5,126.9375 z"
	},
	{
		path: "m 135.15625,134.40625 c -3.51562,0.10081 -6.98375,0.31889 -10.40625,0.59375 -3.4225,0.27486 -6.79917,0.63092 -10.125,1.0625 -6.65165,0.86316 -13.10005,2.02016 -19.34375,3.40625 -6.243699,1.38609 -12.286353,2.97959 -18.09375,4.75 -5.807397,1.77041 -11.407258,3.70262 -16.75,5.71875 -5.342742,2.01613 -10.370842,4.2185 -15.1875,6.59375 -4.816658,2.37525 -9.414819,4.92843 -13.8125,7.625 -4.397681,2.69657 -8.601689,5.55116 -12.6875,8.53125 -4.085811,2.98009 -8.056452,6.08669 -11.9375,9.3125 -1.0452471,0.86878 -2.0584246,1.80264 -3.09375,2.6875 l 0,200.65625 c 3.5601005,-1.00572 6.923197,-1.80977 10.59375,-2.9375 8.530746,-2.62097 17.325983,-5.55645 26.1875,-8.65625 8.861517,-3.0998 17.773186,-6.36089 26.59375,-9.6875 17.641129,-6.65323 34.84677,-13.51411 50.09375,-19.5625 15.24698,-6.04839 28.55847,-11.29133 38.4375,-14.71875 9.87903,-3.42742 19.59173,-6.90474 29.21875,-10.21875 9.62702,-3.31401 19.14919,-6.47782 28.625,-9.25 4.7379,-1.38609 9.4685,-2.67345 14.1875,-3.84375 4.719,-1.1703 9.44355,-2.22404 14.15625,-3.125 4.7127,-0.90096 9.406,-1.64069 14.125,-2.21875 4.719,-0.57806 9.4496,-0.98589 14.1875,-1.1875 4.7379,-0.20161 9.73022,-0.23053 14.9375,-0.125 5.20728,0.10553 10.63054,0.34703 16.1875,0.71875 5.55696,0.37172 11.27558,0.87179 17.0625,1.46875 5.78692,0.59696 11.63407,1.28125 17.53125,2.0625 11.79435,1.5625 23.70161,3.47732 35.21875,5.53125 11.51714,2.05393 22.65524,4.25101 32.9375,6.46875 20.56452,4.43548 46.76008,10.07762 72.0625,15.21875 12.65121,2.57056 25.09022,5.02067 36.46875,7.125 11.37853,2.10433 21.71976,3.88407 30.1875,5.09375 8.46774,1.20968 16.31905,2.37399 24.09375,3.28125 3.88735,0.45363 7.74843,0.82258 11.65625,1.125 3.90782,0.30242 7.88004,0.52419 11.9375,0.625 4.05746,0.10081 8.195,0.0887 12.53125,-0.0625 4.33625,-0.15121 8.84955,-0.45262 13.59375,-0.90625 4.7442,-0.45363 9.71869,-1.06855 15,-1.875 2.83772,-0.43332 6.0098,-1.07864 9.03125,-1.625 l 0,-195.78125 c -3.49821,2.68545 -3.26604,2.62337 -7.21875,5.59375 C 624.8256,160.27621 615.58115,167.06502 607,173 c -4.29057,2.96749 -8.43693,5.70117 -12.21875,8.09375 -3.78182,2.39258 -7.20161,4.4254 -10.125,5.9375 -5.84677,3.02419 -13.60484,7.312 -23.15625,12.0625 -4.77571,2.37525 -10.00164,4.86586 -15.65625,7.375 -5.65461,2.50914 -11.74798,5.05544 -18.25,7.5 -6.50202,2.44456 -13.43208,4.78724 -20.75,6.96875 -3.65896,1.09076 -7.42422,2.13722 -11.28125,3.125 -3.85703,0.98778 -7.79259,1.92125 -11.84375,2.78125 -4.05116,0.86 -8.19615,1.63633 -12.4375,2.34375 -4.24135,0.70742 -8.57239,1.34498 -13,1.875 -4.42761,0.53002 -8.95257,0.95343 -13.5625,1.28125 -4.60993,0.32782 -9.30544,0.55544 -14.09375,0.65625 -4.78831,0.10081 -9.51989,0.004 -14.1875,-0.28125 -4.66761,-0.28509 -9.2862,-0.73866 -13.84375,-1.375 -4.55755,-0.63634 -9.07312,-1.45331 -13.53125,-2.40625 -4.45813,-0.95294 -8.84942,-2.04637 -13.21875,-3.28125 -4.36933,-1.23488 -8.70883,-2.61158 -13,-4.09375 -4.29117,-1.48217 -8.52637,-3.08644 -12.75,-4.78125 -4.22363,-1.69481 -8.42702,-3.47096 -12.59375,-5.34375 -4.16673,-1.87279 -8.31704,-3.82762 -12.4375,-5.84375 -8.24093,-4.03226 -16.38036,-8.32107 -24.5,-12.71875 -8.11964,-4.39768 -16.19783,-8.92036 -24.28125,-13.40625 -8.08342,-4.48589 -16.18025,-8.92188 -24.3125,-13.21875 -8.13225,-4.29687 -16.32762,-8.4506 -24.59375,-12.28125 -4.13306,-1.91532 -8.21296,-3.67858 -12.28125,-5.28125 -4.06829,-1.60267 -8.12503,-3.03642 -12.125,-4.34375 -3.99997,-1.30733 -7.9469,-2.47067 -11.875,-3.5 -3.9281,-1.02933 -7.8348,-1.91885 -11.6875,-2.6875 -3.8527,-0.76865 -7.66376,-1.4122 -11.4375,-1.9375 -3.77374,-0.5253 -7.49625,-0.95073 -11.1875,-1.25 -3.69125,-0.29927 -7.33229,-0.47193 -10.9375,-0.5625 -3.60521,-0.0906 -7.17188,-0.10081 -10.6875,0 z"
	},
	{
		path: "m 120.83022,228.35468 c 0,8.01703 -9.92917,14.51612 -22.177418,14.51612 -12.248251,0 -22.17742,-6.49909 -22.17742,-14.51612 0,-8.01704 9.929169,-14.51613 22.17742,-14.51613 12.248248,0 22.177418,6.49909 22.177418,14.51613 z"
	},
	{
		path: "m 124.25,184.21875 c -6.11178,-0.0223 -13.12268,1.29236 -18.46875,4.5 -0.97162,0.58297 -1.79233,1.31255 -2.5,2.125 0.64156,4.73593 -1.14362,11.44987 -3.25,17.90625 0.18591,1.73321 0.42555,3.46668 0.71875,5.15625 3.26346,0.20182 6.32976,0.88127 9.03125,1.90625 6.55752,-6.92077 14.4762,-11.52501 25.65625,-11.71875 2.57336,-0.0446 5.30966,0.14824 8.25,0.59375 0.67696,0.10257 1.27705,0.23047 1.90625,0.34375 2.53562,-2.09635 4.04249,-4.83554 2.96875,-7.75 -1.99587,-5.41735 -8.28591,-9.40651 -14.84375,-11.6875 -2.45919,-0.85537 -5.80168,-1.36163 -9.46875,-1.375 z"
	},
	{
		path: "m 135.4375,204.09375 c -11.18005,0.19374 -19.09873,4.79798 -25.65625,11.71875 6.60003,2.51474 11.0625,7.17236 11.0625,12.53125 0,0.0516 9.6e-4,0.10475 0,0.15625 7.5496,1.41095 18.57756,4.7621 25.4375,8.8125 2.51897,-0.21021 5.03767,-0.67593 7.40625,-1.53125 10.26445,-3.70661 9.9765,-14.26602 9.40625,-17.6875 -0.57025,-3.42148 -0.58809,-10.55502 -19.40625,-13.40625 -2.94034,-0.44551 -5.67664,-0.63834 -8.25,-0.59375 z m -14.71875,25.71875 c -0.081,0.48557 -0.19895,0.96949 -0.34375,1.4375 0.008,0.005 0.0228,-0.005 0.0312,0 0.14508,-0.46724 0.23797,-0.95509 0.3125,-1.4375 z"
	},
	{
		path: "m 120.84375,228.5 c -0.12522,7.77852 -9.62122,14.08246 -21.4375,14.34375 -2.039552,10.81354 -1.913695,21.89194 9.5,24.84375 16.53718,4.27686 27.65289,-4.82464 32.5,-8.53125 4.8471,-3.70661 13.98011,-8.26653 10.84375,-16.25 -2.5011,-6.36644 -20.56403,-12.37994 -31.40625,-14.40625 z"
	},
	{
		path: "m 78.84375,234.875 c -9.010023,2.44413 -18.184796,5.64586 -22.09375,8.875 -6.557845,5.41735 -9.99974,9.40678 -7.71875,13.96875 2.280989,4.56198 17.981933,11.68337 30.8125,9.6875 12.830566,-1.99587 17.089877,-10.26214 17.375,-13.96875 0.125459,-1.63097 -0.232228,-6.12607 -0.6875,-10.65625 -7.762418,-0.48056 -14.33972,-3.55244 -17.6875,-7.90625 z"
	},
	{
		path: "m 57.6875,217.4375 c -4.616554,0.10442 -8.868805,0.87422 -12.34375,2.65625 -11.119825,5.70247 -18.2611,10.82543 -12.84375,21.375 3.791536,7.38352 12.88725,7.36096 20.15625,5.90625 1.171734,-1.15329 2.534831,-2.3372 4.09375,-3.625 2.973103,-2.45604 8.980085,-4.89695 15.65625,-7 1.671264,-1.38238 3.363842,-2.83078 5,-4.25 -0.601725,-1.31836 -0.9375,-2.70981 -0.9375,-4.15625 0,-3.01935 1.402318,-5.80235 3.8125,-8.125 -7.369514,-1.53201 -15.402162,-2.94391 -22.59375,-2.78125 z"
	},
	{
		path: "m 55.84375,194.25 c -8.285594,0.13519 -15.730377,2.18086 -21.34375,7.59375 -6.521108,6.28821 -2.570879,16.75731 5,21.46875 1.764367,-1.08093 3.734547,-2.13711 5.84375,-3.21875 3.474945,-1.78203 7.727196,-2.55183 12.34375,-2.65625 7.191588,-0.16266 15.224236,1.24924 22.59375,2.78125 2.700874,-2.61147 6.685084,-4.605 11.34375,-5.625 C 83.291052,203.06792 77.355952,196.45053 66.71875,195 63.582389,194.57232 60.484889,194.2901 57.5,194.25 c -0.559667,-0.008 -1.103877,-0.009 -1.65625,0 z m 23.25,27.28125 c -0.385761,0.47082 -0.725866,0.93798 -1.03125,1.4375 0.301876,-0.495 0.6514,-0.97113 1.03125,-1.4375 z"
	},
	{
		path: "m 84.78125,182.34375 c -5.880676,0.10692 -11.496386,1.38895 -14.0625,3.8125 -3.298424,3.11518 -5.905424,4.69279 -8.09375,8.375 1.356158,0.12353 2.716355,0.28093 4.09375,0.46875 10.637202,1.45053 16.572302,8.06792 24.90625,19.59375 2.107041,-0.46512 4.351471,-0.72667 6.6875,-0.75 3.72716,-10.7838 8.22984,-24.3029 2.0625,-28.25 -3.564044,-2.28099 -9.713074,-3.35692 -15.59375,-3.25 z M 91,214.75 c -0.486788,0.1175 -0.96756,0.23623 -1.4375,0.375 0.473011,-0.1405 0.947539,-0.25599 1.4375,-0.375 z m -1.78125,0.46875 c -0.778184,0.24022 -1.524826,0.51684 -2.25,0.8125 0.718426,-0.2928 1.479981,-0.57346 2.25,-0.8125 z"
	},
	{
		path: "m 503.84375,358.0625 c -2.11691,-0.14949 -4.25571,-0.36861 -6.28125,-0.875 -1.20968,-0.30242 -2.3709,-0.68819 -3.46875,-1.1875 -1.09785,-0.49931 -2.16104,-1.1066 -3.125,-1.84375 -0.96396,-0.73715 -1.84822,-1.60906 -2.65625,-2.625 -0.80803,-1.01594 -1.52621,-2.16431 -2.15625,-3.5 -0.63004,-1.33569 -1.16375,-2.83487 -1.59375,-4.53125 -0.43,-1.69638 -0.76084,-3.58947 -0.96875,-5.6875 -0.15266,-1.54049 -0.16488,-3.31757 -0.1875,-5.09375 -2.52363,-0.50606 -4.79598,-0.91983 -7.34375,-1.4375 -4.05949,-0.82484 -7.68876,-1.62672 -11.5625,-2.4375 0.1702,1.55622 0.26507,3.12761 0.21875,4.65625 -0.0473,1.55935 -0.23541,3.0832 -0.59375,4.5 -0.35834,1.4168 -0.9002,2.71573 -1.65625,3.875 -0.75605,1.15927 -1.67421,2.22433 -2.75,3.1875 -1.07579,0.96317 -2.29562,1.84085 -3.625,2.59375 -1.32938,0.7529 -2.79568,1.3778 -4.3125,1.90625 -1.51682,0.52845 -3.1119,0.96018 -4.75,1.25 -1.6381,0.28982 -3.30677,0.43173 -5,0.46875 -1.69323,0.037 -3.41154,-0.0513 -5.09375,-0.28125 -1.68221,-0.22996 -3.33247,-0.58263 -4.9375,-1.09375 -1.60503,-0.51112 -3.16331,-1.1623 -4.625,-1.96875 0.20161,0.90726 0.30935,1.82542 0.3125,2.75 0.003,0.92458 -0.0922,1.85509 -0.28125,2.78125 -0.18901,0.92616 -0.46888,1.83802 -0.84375,2.75 -0.37487,0.91198 -0.85181,1.80544 -1.40625,2.6875 -1.10887,1.76411 -2.55444,3.4501 -4.34375,5 -1.78931,1.5499 -3.9244,2.97782 -6.34375,4.1875 -1.20968,0.60484 -2.50309,1.1417 -3.875,1.59375 -1.37191,0.45205 -2.80066,0.82888 -4.28125,1.125 -2.96119,0.59224 -6.08165,0.8629 -9.15625,0.8125 -1.5373,-0.0252 -3.07718,-0.15316 -4.5625,-0.34375 -1.48532,-0.19059 -2.93271,-0.45338 -4.3125,-0.8125 -1.37979,-0.35912 -2.68555,-0.81294 -3.90625,-1.34375 -1.2207,-0.53081 -2.33569,-1.1381 -3.34375,-1.84375 0.20161,1.00806 0.0963,2.03553 -0.21875,3.0625 -0.31502,1.02697 -0.86895,2.04839 -1.625,3.03125 -0.75605,0.98286 -1.69103,1.93674 -2.8125,2.8125 -1.12147,0.87576 -2.40121,1.66935 -3.8125,2.375 -1.41129,0.70565 -3.20237,1.35837 -5.25,1.875 -2.04763,0.51663 -4.36794,0.91129 -6.8125,1.0625 -2.44456,0.15121 -5.02293,0.0781 -7.625,-0.3125 -1.30103,-0.19531 -2.61073,-0.4799 -3.90625,-0.84375 -1.29552,-0.36385 -2.58367,-0.82056 -3.84375,-1.375 0.40323,1.20968 0.76134,2.49546 0.90625,3.84375 0.14491,1.34829 0.0847,2.75706 -0.34375,4.21875 -0.21421,0.73085 -0.52089,1.49553 -0.9375,2.25 -0.41661,0.75447 -0.93536,1.5063 -1.59375,2.28125 -0.65839,0.77495 -1.4667,1.55147 -2.40625,2.34375 -0.93955,0.79228 -2.02117,1.5998 -3.28125,2.40625 -1.26008,0.80645 -2.6205,1.39195 -4.0625,1.8125 -1.442,0.42055 -2.97795,0.68674 -4.5625,0.78125 -1.58455,0.0945 -3.21853,0.0467 -4.90625,-0.125 -1.68772,-0.17169 -3.40474,-0.46573 -5.15625,-0.84375 -1.31804,-0.28447 -2.66538,-0.78464 -4,-1.15625 0.25794,1.7301 0.61674,3.51265 0.75,5.1875 0.25202,3.16753 0.27112,6.2752 -0.0312,9.375 -0.15121,1.5499 -0.40058,3.09316 -0.71875,4.65625 -0.31817,1.56309 -0.71472,3.12239 -1.21875,4.71875 -0.50403,1.59636 -1.1037,3.22528 -1.8125,4.875 -0.7088,1.64972 -1.53629,3.33934 -2.46875,5.0625 -1.86492,3.44632 -4.18952,7.04568 -7.0625,10.90625 -2.87298,3.86057 -6.28024,7.97077 -10.3125,12.40625 -2.01613,2.21774 -4.36564,4.31434 -7,6.28125 -2.63436,1.96691 -5.5654,3.80021 -8.71875,5.53125 -3.15335,1.73104 -6.52063,3.36487 -10.09375,4.875 -3.57312,1.51013 -7.35635,2.91457 -11.25,4.21875 -3.89365,1.30418 -7.9163,2.5118 -12.03125,3.625 -4.11495,1.1132 -8.29423,2.12532 -12.53125,3.0625 -0.1665,0.0368 -0.33339,0.0573 -0.5,0.0937 l 410.78125,0 0,-48.625 c -1.24096,0.38218 -2.46985,0.73675 -3.6875,0.96875 -1.42339,0.2712 -2.83316,0.43324 -4.1875,0.53125 -2.70867,0.19602 -5.21436,0.0708 -7.40625,-0.21875 -2.19189,-0.28958 -4.05191,-0.75103 -5.40625,-1.25 -1.35434,-0.49896 -3.03926,-1.46727 -4.75,-2.90625 -0.85537,-0.71949 -1.72495,-1.55386 -2.5625,-2.5 -0.83755,-0.94614 -1.62655,-2.02027 -2.375,-3.1875 -0.74845,-1.16723 -1.44318,-2.42976 -2.03125,-3.8125 -0.58807,-1.38274 -1.0811,-2.87607 -1.4375,-4.46875 -0.3564,-1.59268 -0.57154,-3.29669 -0.625,-5.09375 -0.0535,-1.79706 0.0542,-3.69163 0.375,-5.6875 -0.85537,0.74845 -1.82862,1.38334 -2.875,1.90625 -1.04638,0.52291 -2.16984,0.9538 -3.34375,1.28125 -2.34782,0.65489 -4.89799,0.94654 -7.375,1 -2.47701,0.0535 -4.87042,-0.1301 -6.96875,-0.4375 -2.09833,-0.3074 -3.88198,-0.75982 -5.09375,-1.1875 -1.21177,-0.42769 -2.73083,-1.19428 -4.25,-2.3125 -0.75959,-0.55911 -1.5255,-1.20074 -2.25,-1.9375 -0.7245,-0.73676 -1.41645,-1.55101 -2.03125,-2.46875 -0.6148,-0.91774 -1.16328,-1.92918 -1.59375,-3.03125 -0.43047,-1.10207 -0.73473,-2.30401 -0.90625,-3.59375 -0.17152,-1.28974 -0.1933,-2.6755 -0.0312,-4.15625 0.16205,-1.48075 0.49225,-3.04365 1.0625,-4.71875 -0.57025,0.46332 -1.24611,0.88197 -2.0625,1.28125 -0.81639,0.39928 -1.75665,0.77967 -2.8125,1.09375 -2.1117,0.62816 -4.68931,1.05837 -7.71875,1.21875 -3.02944,0.16038 -6.51253,0.0392 -10.40625,-0.4375 -3.89372,-0.47669 -8.20171,-1.31069 -12.90625,-2.59375 -2.35227,-0.64153 -4.61609,-1.47249 -6.78125,-2.46875 -2.16516,-0.99626 -4.22727,-2.15674 -6.1875,-3.46875 -1.96023,-1.31201 -3.82503,-2.78622 -5.5625,-4.375 -1.73747,-1.58878 -3.34685,-3.29843 -4.84375,-5.125 -1.4969,-1.82657 -2.88649,-3.75587 -4.125,-5.78125 -1.23851,-2.02538 -2.35021,-4.12729 -3.3125,-6.3125 -0.10203,-0.2317 -0.15118,-0.4855 -0.25,-0.71875 z"
	},
	{
		path: "m 314.78125,396.78125 c 1.33462,0.37161 2.68196,0.87178 4,1.15625 1.75151,0.37802 3.46853,0.67206 5.15625,0.84375 1.68772,0.17169 3.3217,0.21951 4.90625,0.125 1.58455,-0.0945 3.1205,-0.3607 4.5625,-0.78125 1.442,-0.42055 2.80242,-1.00605 4.0625,-1.8125 1.26008,-0.80645 2.3417,-1.61397 3.28125,-2.40625 0.93955,-0.79228 1.74786,-1.5688 2.40625,-2.34375 0.65839,-0.77495 1.17714,-1.52678 1.59375,-2.28125 0.41661,-0.75447 0.72329,-1.51915 0.9375,-2.25 0.42843,-1.46169 0.48866,-2.87046 0.34375,-4.21875 -0.14491,-1.34829 -0.50302,-2.63407 -0.90625,-3.84375 1.26008,0.55444 2.54823,1.01115 3.84375,1.375 1.29552,0.36385 2.60522,0.64844 3.90625,0.84375 2.60207,0.39062 5.18044,0.46371 7.625,0.3125 2.44456,-0.15121 4.76487,-0.54587 6.8125,-1.0625 2.04763,-0.51663 3.83871,-1.16935 5.25,-1.875 1.41129,-0.70565 2.69103,-1.49924 3.8125,-2.375 1.12147,-0.87576 2.05645,-1.82964 2.8125,-2.8125 0.75605,-0.98286 1.30998,-2.00428 1.625,-3.03125 0.31502,-1.02697 0.42036,-2.05444 0.21875,-3.0625 1.00806,0.70565 2.12305,1.31294 3.34375,1.84375 1.2207,0.53081 2.52646,0.98463 3.90625,1.34375 1.37979,0.35912 2.82718,0.62191 4.3125,0.8125 1.48532,0.19059 3.0252,0.31855 4.5625,0.34375 3.0746,0.0504 6.19506,-0.22026 9.15625,-0.8125 1.48059,-0.29612 2.90934,-0.67295 4.28125,-1.125 1.37191,-0.45205 2.66532,-0.98891 3.875,-1.59375 2.41935,-1.20968 4.55444,-2.6376 6.34375,-4.1875 1.78931,-1.5499 3.23488,-3.23589 4.34375,-5 0.55444,-0.88206 1.03138,-1.77552 1.40625,-2.6875 0.37487,-0.91198 0.65474,-1.82384 0.84375,-2.75 0.18901,-0.92616 0.2844,-1.85667 0.28125,-2.78125 -0.003,-0.92458 -0.11089,-1.84274 -0.3125,-2.75 1.46169,0.80645 3.01997,1.45763 4.625,1.96875 1.60503,0.51112 3.25529,0.86379 4.9375,1.09375 1.68221,0.22996 3.40052,0.31827 5.09375,0.28125 1.69323,-0.037 3.3619,-0.17893 5,-0.46875 1.6381,-0.28982 3.23318,-0.72155 4.75,-1.25 1.51682,-0.52845 2.98312,-1.15335 4.3125,-1.90625 1.32938,-0.7529 2.54921,-1.63058 3.625,-2.59375 1.07579,-0.96317 1.99395,-2.02823 2.75,-3.1875 0.75605,-1.15927 1.29791,-2.4582 1.65625,-3.875 0.35834,-1.4168 0.5465,-2.94065 0.59375,-4.5 0.0463,-1.52864 -0.0485,-3.10003 -0.21875,-4.65625 -10.1666,-2.12787 -20.18123,-4.23927 -30.34375,-6.40625 -0.98205,1.94999 -1.70604,3.55035 -2.84375,5.625 -1.28528,2.34375 -2.65278,4.72423 -4.0625,6.96875 -1.40972,2.24452 -2.85711,4.34753 -4.3125,6.21875 -1.45539,1.87122 -2.92143,3.4949 -4.34375,4.71875 -0.71116,0.61193 -1.40563,1.13255 -2.09375,1.53125 -0.68812,0.3987 -1.37601,0.69254 -2.03125,0.84375 -2.62097,0.60484 -5.08669,0.89415 -7.53125,0.84375 -1.22228,-0.0252 -2.43082,-0.13584 -3.65625,-0.34375 -1.22543,-0.20791 -2.45867,-0.50302 -3.71875,-0.90625 -2.52016,-0.80645 -5.15222,-2.02419 -8,-3.6875 -2.84778,-1.66331 -5.91633,-3.78528 -9.34375,-6.40625 1.81452,2.01613 3.49597,3.87349 4.78125,5.625 0.64264,0.87576 1.16847,1.73872 1.59375,2.5625 0.42528,0.82378 0.72379,1.625 0.875,2.40625 0.15121,0.78125 0.17956,1.53308 0,2.28125 -0.17956,0.74817 -0.55796,1.4942 -1.125,2.21875 -0.56704,0.72455 -1.33254,1.44588 -2.34375,2.15625 -1.01121,0.71037 -2.26915,1.3881 -3.78125,2.09375 -1.5121,0.70565 -3.02048,1.30267 -4.5625,1.75 -1.54202,0.44733 -3.1061,0.76109 -4.6875,0.9375 -1.5814,0.17641 -3.18227,0.20091 -4.8125,0.0937 -1.63023,-0.10711 -3.28024,-0.34677 -4.96875,-0.75 -1.68851,-0.40323 -3.43126,-0.9443 -5.1875,-1.65625 -1.75624,-0.71195 -3.54158,-1.59173 -5.375,-2.625 -1.83342,-1.03327 -3.70495,-2.22656 -5.625,-3.59375 -1.92005,-1.36719 -3.89012,-2.91129 -5.90625,-4.625 1.20968,2.01613 2.65877,4.03377 3.90625,6.0625 0.62374,1.01436 1.1979,2.04026 1.65625,3.0625 0.45835,1.02224 0.82359,2.02923 1,3.0625 0.17641,1.03327 0.19079,2.07756 -0.0312,3.125 -0.22209,1.04744 -0.70035,2.09148 -1.4375,3.15625 -0.73715,1.06477 -1.75624,2.16476 -3.125,3.25 -1.36876,1.08524 -3.07056,2.17238 -5.1875,3.28125 -1.05847,0.55444 -2.15013,0.98297 -3.28125,1.28125 -1.13112,0.29828 -2.31474,0.45958 -3.5,0.53125 -1.18526,0.0717 -2.37285,0.0317 -3.59375,-0.0937 -1.2209,-0.12542 -2.48072,-0.33203 -3.71875,-0.625 -2.47606,-0.58594 -4.94147,-1.48356 -7.375,-2.5625 -2.43353,-1.07894 -4.81956,-2.35181 -7.0625,-3.6875 -0.61668,-0.36724 -1.12361,-0.74974 -1.71875,-1.125 0.43214,1.28211 0.90955,2.54544 1.21875,3.875 2.01613,8.66935 3.97077,16.05192 5.28125,22.84375 0.30878,1.60031 0.42636,3.08309 0.65625,4.625 z"
	},
	{
		path: "m 307.625,365.4375 c 0.59514,0.37526 1.10207,0.75776 1.71875,1.125 2.24294,1.33569 4.62897,2.60856 7.0625,3.6875 2.43353,1.07894 4.89894,1.97656 7.375,2.5625 1.23803,0.29297 2.49785,0.49958 3.71875,0.625 1.2209,0.12542 2.40849,0.16542 3.59375,0.0937 1.18526,-0.0717 2.36888,-0.23297 3.5,-0.53125 1.13112,-0.29828 2.22278,-0.72681 3.28125,-1.28125 2.11694,-1.10887 3.81874,-2.19601 5.1875,-3.28125 1.36876,-1.08524 2.38785,-2.18523 3.125,-3.25 0.73715,-1.06477 1.21541,-2.10881 1.4375,-3.15625 0.22209,-1.04744 0.20766,-2.09173 0.0312,-3.125 -0.17641,-1.03327 -0.54165,-2.04026 -1,-3.0625 -0.45835,-1.02224 -1.03251,-2.04814 -1.65625,-3.0625 -1.24748,-2.02873 -2.69657,-4.04637 -3.90625,-6.0625 2.01613,1.71371 3.9862,3.25781 5.90625,4.625 1.92005,1.36719 3.79158,2.56048 5.625,3.59375 1.83342,1.03327 3.61876,1.91305 5.375,2.625 1.75624,0.71195 3.49899,1.25302 5.1875,1.65625 1.68851,0.40323 3.33852,0.64289 4.96875,0.75 1.63023,0.10711 3.2311,0.0827 4.8125,-0.0937 1.5814,-0.17641 3.14548,-0.49017 4.6875,-0.9375 1.54202,-0.44733 3.0504,-1.04435 4.5625,-1.75 1.5121,-0.70565 2.77004,-1.38338 3.78125,-2.09375 1.01121,-0.71037 1.77671,-1.4317 2.34375,-2.15625 0.56704,-0.72455 0.94544,-1.47058 1.125,-2.21875 0.17956,-0.74817 0.15121,-1.5 0,-2.28125 -0.15121,-0.78125 -0.44972,-1.58247 -0.875,-2.40625 -0.42528,-0.82378 -0.95111,-1.68674 -1.59375,-2.5625 -1.28528,-1.75151 -2.96673,-3.60887 -4.78125,-5.625 3.42742,2.62097 6.49597,4.74294 9.34375,6.40625 2.84778,1.66331 5.47984,2.88105 8,3.6875 1.26008,0.40323 2.49332,0.69834 3.71875,0.90625 1.22543,0.20791 2.43397,0.31855 3.65625,0.34375 2.44456,0.0504 4.91028,-0.23891 7.53125,-0.84375 0.65524,-0.15121 1.34313,-0.44505 2.03125,-0.84375 0.68812,-0.3987 1.38259,-0.91932 2.09375,-1.53125 1.42232,-1.22385 2.88836,-2.84753 4.34375,-4.71875 1.45539,-1.87122 2.90278,-3.97423 4.3125,-6.21875 1.40972,-2.24452 2.77722,-4.625 4.0625,-6.96875 1.13771,-2.07465 1.8617,-3.67501 2.84375,-5.625 -10.10029,-2.15371 -21.55018,-4.51879 -30.15625,-6.375 -10.28226,-2.21774 -21.42036,-4.41482 -32.9375,-6.46875 -11.51714,-2.05393 -23.4244,-3.96875 -35.21875,-5.53125 -5.89718,-0.78125 -11.74433,-1.46554 -17.53125,-2.0625 -5.78692,-0.59696 -11.50554,-1.09703 -17.0625,-1.46875 -5.55696,-0.37172 -10.98022,-0.61322 -16.1875,-0.71875 -5.20728,-0.10553 -10.1996,-0.0766 -14.9375,0.125 -4.7379,0.20161 -9.4685,0.60944 -14.1875,1.1875 -4.719,0.57806 -9.4123,1.31779 -14.125,2.21875 -4.7127,0.90096 -9.43725,1.9547 -14.15625,3.125 -4.719,1.1703 -9.4496,2.45766 -14.1875,3.84375 -9.3513,2.73575 -18.75218,5.85847 -28.25,9.125 -1.42852,0.60601 -2.85018,1.20665 -4.3125,1.8125 l 0.5,0.46875 c 4.38508,-0.35282 8.6899,-0.61547 12.90625,-0.78125 4.21635,-0.16578 8.36848,-0.23608 12.40625,-0.21875 4.03777,0.0173 7.96315,0.11601 11.8125,0.3125 3.84935,0.19649 7.59892,0.50328 11.25,0.875 3.65108,0.37172 7.21328,0.83198 10.65625,1.375 3.44297,0.54302 6.77498,1.16463 10,1.875 3.22502,0.71037 6.34653,1.50121 9.34375,2.375 2.99722,0.87379 5.86542,1.81048 8.625,2.84375 2.75958,1.03327 5.39416,2.15494 7.90625,3.34375 2.51209,1.18881 4.90149,2.44084 7.15625,3.78125 2.25476,1.34041 4.38742,2.76192 6.375,4.25 1.98758,1.48808 3.85194,3.0557 5.5625,4.6875 1.71056,1.6318 3.26381,3.32216 4.6875,5.09375 1.42369,1.77159 2.71677,3.6238 3.84375,5.53125 1.12698,1.90745 2.08582,3.89814 2.90625,5.9375 0.31714,0.78831 0.50895,1.62962 0.78125,2.4375 z"
	},
	{
		path: "m 483.40625,332.71875 c 0.0226,1.77618 0.0348,3.55326 0.1875,5.09375 0.20791,2.09803 0.53875,3.99112 0.96875,5.6875 0.43,1.69638 0.96371,3.19556 1.59375,4.53125 0.63004,1.33569 1.34822,2.48406 2.15625,3.5 0.80803,1.01594 1.69229,1.88785 2.65625,2.625 0.96396,0.73715 2.02715,1.34444 3.125,1.84375 1.09785,0.49931 2.25907,0.88508 3.46875,1.1875 2.41935,0.60484 4.97984,0.97429 7.5,1.0625 2.52016,0.0882 5.00101,-0.0776 7.21875,-0.53125 1.10887,-0.22681 2.13609,-0.53925 3.09375,-0.90625 0.95766,-0.367 1.8377,-0.80217 2.59375,-1.3125 0.75605,-0.51033 1.40222,-1.09318 1.90625,-1.75 0.50403,-0.65682 0.86089,-1.38105 1.0625,-2.1875 0.60484,2.11694 1.35692,3.92332 2.25,5.5 0.89308,1.57668 1.92868,2.91608 3.03125,4.03125 1.10257,1.11517 2.29795,2.01758 3.53125,2.75 1.2333,0.73242 2.49597,1.29032 3.78125,1.71875 1.28528,0.42843 2.58524,0.73431 3.84375,0.9375 1.25851,0.20319 2.47203,0.3183 3.625,0.375 2.30595,0.11341 4.33871,0 5.75,0 1.41129,0 2.95615,-0.31452 4.53125,-0.84375 1.5751,-0.52923 3.16331,-1.28024 4.625,-2.1875 1.46169,-0.90726 2.80393,-1.95968 3.875,-3.09375 1.07107,-1.13407 1.87802,-2.35282 2.28125,-3.5625 0.20161,2.21774 0.66356,4.16022 1.3125,5.8125 0.64894,1.65228 1.48589,3.02193 2.46875,4.1875 0.98286,1.16557 2.10912,2.11738 3.3125,2.875 1.20338,0.75762 2.47077,1.32157 3.78125,1.75 1.31048,0.42843 2.66457,0.72826 3.96875,0.90625 1.30418,0.17799 2.56552,0.2437 3.75,0.25 2.36895,0.0126 4.38407,-0.23589 5.59375,-0.4375 1.20968,-0.20161 2.58871,-0.57712 4,-1.09375 1.41129,-0.51663 2.86996,-1.1744 4.28125,-2.03125 1.41129,-0.85685 2.75907,-1.90272 3.96875,-3.125 1.20968,-1.22228 2.2873,-2.6371 3.09375,-4.25 -0.40323,2.11694 -0.63237,3.98217 -0.6875,5.625 -0.0551,1.64283 0.0481,3.08392 0.28125,4.3125 0.23311,1.22858 0.601,2.25082 1.0625,3.125 0.4615,0.87418 1.02621,1.57661 1.65625,2.15625 0.63004,0.57964 1.32378,1.03005 2.0625,1.375 0.73872,0.34495 1.52495,0.61114 2.3125,0.78125 1.5751,0.34022 3.18246,0.375 4.59375,0.375 1.41129,0 2.82611,-0.0549 4.25,-0.21875 1.42389,-0.16381 2.85081,-0.42137 4.3125,-0.875 1.46169,-0.45363 2.94405,-1.09929 4.46875,-1.96875 1.5247,-0.86946 3.10585,-1.96371 4.71875,-3.375 -1.71371,1.81452 -3.04656,3.52892 -4.0625,5.1875 -1.01594,1.65858 -1.72152,3.2568 -2.15625,4.75 -0.43473,1.4932 -0.62368,2.90039 -0.59375,4.21875 0.0299,1.31836 0.27823,2.55343 0.65625,3.6875 0.37802,1.13407 0.89044,2.15341 1.5,3.09375 0.60956,0.94034 1.3067,1.7941 2.03125,2.53125 1.44909,1.4743 3.00907,2.52016 4.21875,3.125 0.60484,0.30242 1.54083,0.50372 2.6875,0.625 1.14667,0.12128 2.51915,0.17515 4.03125,0.15625 0.49018,-0.006 1.10869,-0.10699 1.625,-0.125 l 0,-56.53125 c -3.02145,0.54636 -6.19353,1.19168 -9.03125,1.625 -5.28131,0.80645 -10.2558,1.42137 -15,1.875 -4.7442,0.45363 -9.2575,0.75504 -13.59375,0.90625 -4.33625,0.15121 -8.47379,0.16331 -12.53125,0.0625 -4.05746,-0.10081 -8.02968,-0.32258 -11.9375,-0.625 -3.90782,-0.30242 -7.7689,-0.67137 -11.65625,-1.125 -7.7747,-0.90726 -15.62601,-2.07157 -24.09375,-3.28125 -8.46774,-1.20968 -18.80897,-2.98942 -30.1875,-5.09375 -9.08706,-1.68055 -19.11729,-3.68065 -29.125,-5.6875 z"
	},
	{
		path: "m 503.84375,358.0625 c 0.0988,0.23325 0.14797,0.48705 0.25,0.71875 0.96229,2.18521 2.07399,4.28712 3.3125,6.3125 1.23851,2.02538 2.6281,3.95468 4.125,5.78125 1.4969,1.82657 3.10628,3.53622 4.84375,5.125 1.73747,1.58878 3.60227,3.06299 5.5625,4.375 1.96023,1.31201 4.02234,2.47249 6.1875,3.46875 2.16516,0.99626 4.42898,1.82722 6.78125,2.46875 4.70454,1.28306 9.01253,2.11706 12.90625,2.59375 3.89372,0.47669 7.37681,0.59788 10.40625,0.4375 3.02944,-0.16038 5.60705,-0.59059 7.71875,-1.21875 1.05585,-0.31408 1.99611,-0.69447 2.8125,-1.09375 0.81639,-0.39928 1.49225,-0.81793 2.0625,-1.28125 -0.57025,1.6751 -0.90045,3.238 -1.0625,4.71875 -0.16205,1.48075 -0.14027,2.86651 0.0312,4.15625 0.17152,1.28974 0.47578,2.49168 0.90625,3.59375 0.43047,1.10207 0.97895,2.11351 1.59375,3.03125 0.6148,0.91774 1.30675,1.73199 2.03125,2.46875 0.7245,0.73676 1.49041,1.37839 2.25,1.9375 1.51917,1.11822 3.03823,1.88481 4.25,2.3125 1.21177,0.42768 2.99542,0.8801 5.09375,1.1875 2.09833,0.3074 4.49174,0.49096 6.96875,0.4375 2.47701,-0.0535 5.02718,-0.34511 7.375,-1 1.17391,-0.32745 2.29737,-0.75834 3.34375,-1.28125 1.04638,-0.52291 2.01963,-1.1578 2.875,-1.90625 -0.32076,1.99587 -0.42846,3.89044 -0.375,5.6875 0.0535,1.79706 0.2686,3.50107 0.625,5.09375 0.3564,1.59268 0.84943,3.08601 1.4375,4.46875 0.58807,1.38274 1.2828,2.64527 2.03125,3.8125 0.74845,1.16723 1.53745,2.24136 2.375,3.1875 0.83755,0.94614 1.70713,1.78051 2.5625,2.5 1.71074,1.43898 3.39566,2.40729 4.75,2.90625 1.35434,0.49897 3.21436,0.96042 5.40625,1.25 2.19189,0.28958 4.69758,0.41477 7.40625,0.21875 1.35434,-0.098 2.76411,-0.26005 4.1875,-0.53125 1.21765,-0.232 2.44654,-0.58657 3.6875,-0.96875 l 0,-32.4375 c -0.51631,0.018 -1.13482,0.11887 -1.625,0.125 -1.5121,0.0189 -2.88458,-0.035 -4.03125,-0.15625 -1.14667,-0.12128 -2.08266,-0.32258 -2.6875,-0.625 -1.20968,-0.60484 -2.76966,-1.6507 -4.21875,-3.125 -0.72455,-0.73715 -1.42169,-1.59091 -2.03125,-2.53125 -0.60956,-0.94034 -1.12198,-1.95968 -1.5,-3.09375 -0.37802,-1.13407 -0.62632,-2.36914 -0.65625,-3.6875 -0.0299,-1.31836 0.15902,-2.72555 0.59375,-4.21875 0.43473,-1.4932 1.14031,-3.09142 2.15625,-4.75 1.01594,-1.65858 2.34879,-3.37298 4.0625,-5.1875 -1.6129,1.41129 -3.19405,2.50554 -4.71875,3.375 -1.5247,0.86946 -3.00706,1.51512 -4.46875,1.96875 -1.46169,0.45363 -2.88861,0.71119 -4.3125,0.875 -1.42389,0.16381 -2.83871,0.21875 -4.25,0.21875 -1.41129,0 -3.01865,-0.0348 -4.59375,-0.375 -0.78755,-0.17011 -1.57378,-0.4363 -2.3125,-0.78125 -0.73872,-0.34495 -1.43246,-0.79536 -2.0625,-1.375 -0.63004,-0.57964 -1.19475,-1.28207 -1.65625,-2.15625 -0.4615,-0.87418 -0.82939,-1.89642 -1.0625,-3.125 -0.23311,-1.22858 -0.33638,-2.66967 -0.28125,-4.3125 0.0551,-1.64283 0.28427,-3.50806 0.6875,-5.625 -0.80645,1.6129 -1.88407,3.02772 -3.09375,4.25 -1.20968,1.22228 -2.55746,2.26815 -3.96875,3.125 -1.41129,0.85685 -2.86996,1.51462 -4.28125,2.03125 -1.41129,0.51663 -2.79032,0.89214 -4,1.09375 -1.20968,0.20161 -3.2248,0.4501 -5.59375,0.4375 -1.18448,-0.006 -2.44582,-0.072 -3.75,-0.25 -1.30418,-0.17799 -2.65827,-0.47782 -3.96875,-0.90625 -1.31048,-0.42843 -2.57787,-0.99238 -3.78125,-1.75 -1.20338,-0.75762 -2.32964,-1.70943 -3.3125,-2.875 -0.98286,-1.16557 -1.81981,-2.53522 -2.46875,-4.1875 -0.64894,-1.65228 -1.11089,-3.59476 -1.3125,-5.8125 -0.40323,1.20968 -1.21018,2.42843 -2.28125,3.5625 -1.07107,1.13407 -2.41331,2.18649 -3.875,3.09375 -1.46169,0.90726 -3.0499,1.65827 -4.625,2.1875 -1.5751,0.52923 -3.11996,0.84375 -4.53125,0.84375 -1.41129,0 -3.44405,0.11341 -5.75,0 -1.15297,-0.0567 -2.36649,-0.17181 -3.625,-0.375 -1.25851,-0.20319 -2.55847,-0.50907 -3.84375,-0.9375 -1.28528,-0.42843 -2.54795,-0.98633 -3.78125,-1.71875 -1.2333,-0.73242 -2.42868,-1.63483 -3.53125,-2.75 -1.10257,-1.11517 -2.13817,-2.45457 -3.03125,-4.03125 -0.89308,-1.57668 -1.64516,-3.38306 -2.25,-5.5 -0.20161,0.80645 -0.55847,1.53068 -1.0625,2.1875 -0.50403,0.65682 -1.1502,1.23967 -1.90625,1.75 -0.75605,0.51033 -1.63609,0.9455 -2.59375,1.3125 -0.95766,0.367 -1.98488,0.67944 -3.09375,0.90625 -2.21774,0.45363 -4.69859,0.61946 -7.21875,0.53125 -0.41022,-0.0144 -0.80718,-0.15844 -1.21875,-0.1875 z"
	},
	{
		path: "m 106.15625,348.8125 c -12.504069,4.95676 -25.30671,10.0621 -39.0625,15.25 -8.820564,3.32661 -17.732233,6.5877 -26.59375,9.6875 -8.861517,3.0998 -17.656754,6.03528 -26.1875,8.65625 -3.670553,1.12773 -7.0336495,1.93178 -10.59375,2.9375 l 0,59.78125 c 2.0086918,-3.10274 4.0819971,-6.15765 6.21875,-9.15625 2.319139,-3.25455 4.709331,-6.46717 7.15625,-9.59375 4.893838,-6.25315 10.020413,-12.22933 15.28125,-17.9375 5.260837,-5.70817 10.658077,-11.13092 16.09375,-16.25 5.435673,-5.11908 10.894153,-9.95161 16.3125,-14.4375 5.418347,-4.48589 10.791142,-8.62891 16,-12.4375 5.208858,-3.80859 10.255293,-7.25655 15.0625,-10.34375 3.645672,-2.34126 6.995,-4.25219 10.3125,-6.15625 z"
	},
	{
		path: "m 185.21875,319.4375 c -0.12646,0.0435 -0.24851,0.0815 -0.375,0.125 -9.62702,3.31401 -19.33972,6.79133 -29.21875,10.21875 -9.87903,3.42742 -23.19052,8.67036 -38.4375,14.71875 -3.35804,1.33212 -7.49946,2.91246 -11.03125,4.3125 -3.3175,1.90406 -6.666828,3.81499 -10.3125,6.15625 -4.807207,3.0872 -9.853642,6.53516 -15.0625,10.34375 -5.208858,3.80859 -10.581653,7.95161 -16,12.4375 -5.418347,4.48589 -10.876827,9.31842 -16.3125,14.4375 -5.435673,5.11908 -10.832913,10.54183 -16.09375,16.25 -5.260837,5.70817 -10.387412,11.68435 -15.28125,17.9375 -2.446919,3.12658 -4.837111,6.3392 -7.15625,9.59375 -2.1367529,2.9986 -4.2100582,6.05351 -6.21875,9.15625 l 0,36.53125 24.5625,0 c 0.5918,-3.94525 1.316708,-7.805 2.1875,-11.59375 0.910605,-3.96197 1.970987,-7.8361 3.15625,-11.625 1.185263,-3.7889 2.508687,-7.51113 3.9375,-11.125 1.428813,-3.61387 2.952495,-7.12563 4.59375,-10.5625 1.641255,-3.43687 3.396161,-6.77335 5.21875,-10.03125 1.822589,-3.2579 3.714686,-6.42304 5.6875,-9.5 1.972814,-3.07696 4.033069,-6.0747 6.125,-8.96875 2.091931,-2.89405 4.22631,-5.69708 6.40625,-8.40625 4.359879,-5.41835 8.849735,-10.45798 13.375,-15.125 4.525265,-4.66702 9.089465,-8.97505 13.53125,-12.875 4.441785,-3.89995 8.76556,-7.41413 12.875,-10.53125 4.10944,-3.11712 8.00302,-5.8377 11.53125,-8.15625 3.52822,-2.31855 8.18807,-5.03043 13.78125,-8.0625 5.59318,-3.03207 12.12324,-6.36568 19.375,-9.875 7.25176,-3.50932 15.21478,-7.21844 23.71875,-10.96875 3.61535,-1.59439 7.64817,-3.20498 11.4375,-4.8125 z"
	},
	{
		path: "m 229.78125,481.65625 c 0.16661,-0.0366 0.3335,-0.0569 0.5,-0.0937 4.23702,-0.93718 8.4163,-1.9493 12.53125,-3.0625 4.11495,-1.1132 8.1376,-2.32082 12.03125,-3.625 3.89365,-1.30418 7.67688,-2.70862 11.25,-4.21875 3.57312,-1.51013 6.9404,-3.14396 10.09375,-4.875 3.15335,-1.73104 6.08439,-3.56434 8.71875,-5.53125 2.63436,-1.96691 4.98387,-4.06351 7,-6.28125 4.03226,-4.43548 7.43952,-8.54568 10.3125,-12.40625 2.87298,-3.86057 5.19758,-7.45993 7.0625,-10.90625 0.93246,-1.72316 1.75995,-3.41278 2.46875,-5.0625 0.7088,-1.64972 1.30847,-3.27864 1.8125,-4.875 0.50403,-1.59636 0.90058,-3.15566 1.21875,-4.71875 0.31817,-1.56309 0.56754,-3.10635 0.71875,-4.65625 3.92166,-18.23829 -0.821,-33.34746 -7.0434,-47.5373 -2.70042,-4.12004 -5.53079,-8.73245 -8.3629,-12.2752 -1.42369,-1.77159 -2.97694,-3.46195 -4.6875,-5.09375 -1.71056,-1.6318 -3.57492,-3.19942 -5.5625,-4.6875 -1.98758,-1.48808 -4.12024,-2.90959 -6.375,-4.25 -2.25476,-1.34041 -4.64416,-2.59244 -7.15625,-3.78125 -2.51209,-1.18881 -5.14667,-2.31048 -7.90625,-3.34375 -2.75958,-1.03327 -5.62778,-1.96996 -8.625,-2.84375 -2.99722,-0.87379 -6.11873,-1.66463 -9.34375,-2.375 -3.22502,-0.71037 -6.55703,-1.33198 -10,-1.875 -3.44297,-0.54302 -7.00517,-1.00328 -10.65625,-1.375 -3.65108,-0.37172 -7.40065,-0.67851 -11.25,-0.875 -3.84935,-0.19649 -7.77473,-0.29517 -11.8125,-0.3125 -4.03777,-0.0173 -8.1899,0.053 -12.40625,0.21875 -4.21635,0.16578 -8.52117,0.42843 -12.90625,0.78125 l -0.5,-0.46875 c -2.41666,1.00124 -4.87258,2.00667 -7.125,3 -8.50397,3.75031 -16.46699,7.45943 -23.71875,10.96875 -7.25176,3.50932 -13.78182,6.84293 -19.375,9.875 -5.59318,3.03207 -10.25303,5.74395 -13.78125,8.0625 -3.52823,2.31855 -7.42181,5.03913 -11.53125,8.15625 -4.10944,3.11712 -8.43321,6.6313 -12.875,10.53125 -4.44178,3.89995 -9.005985,8.20798 -13.53125,12.875 -4.525265,4.66702 -9.015121,9.70665 -13.375,15.125 -2.17994,2.70917 -4.314319,5.5122 -6.40625,8.40625 -2.091931,2.89405 -4.152186,5.89179 -6.125,8.96875 -1.972814,3.07696 -3.864911,6.2421 -5.6875,9.5 -1.822589,3.2579 -3.577495,6.59438 -5.21875,10.03125 -1.641255,3.43687 -3.164937,6.94863 -4.59375,10.5625 -1.428813,3.61387 -2.752237,7.3361 -3.9375,11.125 -1.185263,3.7889 -2.245645,7.66303 -3.15625,11.625 -0.870792,3.78875 -1.5957,7.6485 -2.1875,11.59375 l 201.5,0 z"
	},
	{
		path: "m 64.064516,481.39444 c 2.627168,-28.67735 13.153869,-56.25918 29.463095,-79.86617 16.309229,-23.607 38.400969,-43.23916 64.158239,-56.01716 24.80753,-14.06129 52.79938,-25.45943 81.88594,-22.5151 28.77289,1.6106 58.57494,16.72167 70.57103,44.06024 12.78271,26.87578 8.61802,62.23449 -14.00107,82.68106 -18.94382,19.70265 -48.30137,33.00285 -75.81509,26.34628 -19.16784,-3.33238 -38.82581,-11.22495 -49.14342,-28.88451 -16.88689,-21.59263 -14.77182,-53.87013 0.94911,-75.43931 13.32963,-18.16344 37.09271,-24.19273 58.45193,-25.72949 22.18109,-1.55457 46.27165,9.92922 54.09035,31.73789 6.94876,16.02503 2.41422,35.41352 -10.39384,47.14841 -15.15109,16.04828 -42.19135,23.41488 -61.18895,9.75179 -11.41531,-7.44253 -21.08656,-23.16443 -14.22251,-36.55692 7.56741,-12.59323 21.94345,-21.06287 36.49276,-22.16578 13.34161,0.0604 26.54941,14.77516 21.55041,27.90858 -5.73064,9.88718 -24.18879,14.77487 -29.23527,2.77975 -5.07637,-8.21522 -1.85926,-15.47369 5.61216,-17.5007 -5.76068,4.59313 -16.59537,7.72949 -3.76481,21.70055 12.83057,13.97106 33.6446,-10.26445 27.657,-19.95866 -5.9876,-9.6942 -16.34153,-21.84586 -39.6322,-9.6942 -26.23137,13.68594 -20.24378,36.78095 -12.26031,46.19004 6.65366,7.84182 33.5215,24.06276 61.87184,3.99173 32.21898,-22.80989 19.10329,-69.28506 -7.98346,-80.11977 -27.08675,-10.8347 -70.99581,1.71075 -90.66934,27.08676 -16.28821,21.00943 -7.98347,65.86358 21.6694,85.82223 29.65286,19.95866 73.23157,9.42042 86.39248,0.85538 17.9628,-11.69007 41.91319,-47.33054 40.20245,-64.43796 -1.71075,-17.10743 -7.1281,-52.46276 -41.91319,-68.14457 -27.75422,-12.51214 -66.71895,-13.40081 -105.49577,7.1281 -38.77682,20.5289 -57.00096,38.95597 -65.29333,49.04127 -10.549576,12.83057 -12.05446,12.92211 -23.95039,36.21072 -11.895929,23.28861 -16.055244,56.58952 -16.055244,56.58952 z"
	},
	{
		path: "m 450.50026,161.36029 c -32.05468,0 -61.11712,9.66669 -82.25,25.4375 -21.13288,15.77081 -34.375,37.74914 -34.375,62.09375 0,24.34461 13.24212,46.32294 34.375,62.09375 21.13288,15.77081 50.19532,25.4375 82.25,25.4375 32.05468,0 61.11712,-9.66669 82.25,-25.4375 21.13288,-15.77081 34.375,-37.74914 34.375,-62.09375 0,-24.34461 -13.24212,-46.32294 -34.375,-62.09375 -21.13288,-15.77081 -50.19532,-25.4375 -82.25,-25.4375 z"
	},
	{
		path: "m 483.875,330.71875 c -10.55982,2.39468 -21.76651,3.6875 -33.375,3.6875 -7.27601,0 -14.38166,-0.50144 -21.28125,-1.46875 -0.0247,7.3246 -0.21685,17.57558 -1.25,22.59375 0,0 -33.92305,25.6542 -44.1875,41.90625 -10.26445,16.25205 -16.25,45.04417 -16.25,55.59375 0,10.54958 3.71231,21.95482 15.6875,36.78125 l 145.6875,3.71875 c 0,0 14.53538,-8.27972 16.53125,-29.09375 1.99587,-20.81403 -1.68519,-46.47963 -15.65625,-73.28125 -13.97106,-26.80163 -35.93079,-36.1955 -45.625,-37.90625 -1.30555,-3.17063 -0.80021,-14.8098 -0.28125,-22.53125 z"
	},
	{
		path: "m 405.125,374.46875 c -17.37712,5.83554 -32.06693,12.00442 -44.15625,24.09375 -14.54131,14.54131 -15.68337,26.25491 -13.6875,35.09375 1.62164,7.18155 9.65232,15.47823 20.25,19.71875 -8.6e-4,-0.1135 0,-0.23045 0,-0.34375 0,-10.54958 5.98555,-39.3417 16.25,-55.59375 4.33593,-6.86522 12.90487,-15.39053 21.34375,-22.96875 z"
	},
	{
		path: "m 518.1875,374.25 c 4.14836,4.65995 8.12139,10.24498 11.59375,16.90625 10.22071,19.60708 14.92477,38.59485 15.9375,55.53125 11.762,-7.12682 18.75547,-15.53452 16.28125,-33.84375 -2.29334,-16.97071 -18.44951,-27.86274 -43.8125,-38.59375 z"
	},
	{
		path: "m 353.14819,159.30141 c -14.4408,0.21592 -31.93241,9.92537 -35.9375,12.6875 -4.13429,2.85124 -2.30863,10.13327 -2.59375,14.125 -0.28513,3.99173 1.57517,15.95687 9.84375,14.53125 8.26859,-1.42562 13.11751,-11.68493 15.96875,-23.375 0,0 -0.84194,6.29365 -2.125,12.28125 0,0 8.83705,-0.86338 18.53125,-1.71875 -2.70867,0.28512 -6.7172,2.43362 -10.28125,2.71875 -0.19864,1.7878 0.62544,7.33685 2.75,14.1875 8.22868,-11.02563 19.62829,-20.56674 33.28125,-27.90625 -5.37343,-7.99487 -15.79714,-17.17491 -28.03125,-17.53125 -0.45887,-0.0134 -0.94042,-0.007 -1.40625,0 z"
	},
	{
		path: "m 550.13306,144.78125 c -6.14798,0.14256 -11.87062,1.44938 -16.21875,2.875 -7.55,2.47541 -15.96696,16.13309 -22.4375,26.3125 15.00159,6.88659 27.714,16.28882 37.09375,27.40625 4.62875,-9.66273 5.48408,-24.48189 5,-26.78125 -0.57024,-2.70867 -6.39748,-2.27376 -15.09375,-5.125 0,0 7.8231,2.42769 15.09375,2 7.27066,-0.42769 28.25594,-6.97495 28.96875,-9.96875 0.71281,-2.9938 -1.7123,-6.00466 -13.6875,-12.5625 -5.9876,-3.27893 -12.57077,-4.29881 -18.71875,-4.15625 z"
	},
	{
		path: "m 440.80124,211.24727 c 0,13.22743 -15.31851,23.95039 -34.21484,23.95039 -18.89634,0 -34.21485,-10.72296 -34.21485,-23.95039 0,-13.22744 15.31851,-23.95039 34.21485,-23.95039 18.89633,0 34.21484,10.72295 34.21484,23.95039 z"
	},
	{
		path: "m 507.52018,209.53651 c 0,11.96768 -12.76542,21.66941 -28.51237,21.66941 -15.74695,0 -28.51237,-9.70173 -28.51237,-21.66941 0,-11.96768 12.76542,-21.6694 28.51237,-21.6694 15.74695,0 28.51237,9.70172 28.51237,21.6694 z"
	},
	{
		path: "m 425.97481,218.09023 c 0,4.0942 -4.59555,7.41321 -10.26445,7.41321 -5.6689,0 -10.26446,-3.31901 -10.26446,-7.41321 0,-4.09421 4.59556,-7.41322 10.26446,-7.41322 5.6689,0 10.26445,3.31901 10.26445,7.41322 z"
	},
	{
		path: "m 507.52018,209.53651 c 0,11.96768 -12.76542,21.66941 -28.51237,21.66941 -15.74695,0 -28.51237,-9.70173 -28.51237,-21.66941 0,-11.96768 12.76542,-21.6694 28.51237,-21.6694 15.74695,0 28.51237,9.70172 28.51237,21.6694 z"
	},
	{
		path: "m 479.57806,215.239 c 0,3.77927 -4.34025,6.84297 -9.69421,6.84297 -5.35396,0 -9.69421,-3.0637 -9.69421,-6.84297 0,-3.77927 4.34025,-6.84297 9.69421,-6.84297 5.35396,0 9.69421,3.0637 9.69421,6.84297 z"
	},
	{
		path: "m 442.53125,235.5 c 9.28669,0 17.65112,2.23007 23.5625,5.71875 5.91138,3.48868 7.00101,9.0674 7.00101,13.82056 0,4.75316 -1.08963,8.28451 -7.00101,11.77319 -5.91138,3.48868 -15.88871,-0.12802 -25.1754,-0.12802 -9.28669,0 -16.06947,3.6167 -21.98085,0.12802 -5.91138,-3.48868 -7.17137,-7.22164 -7.17137,-11.9748 0,-4.75316 1.25999,-10.13027 7.17137,-13.61895 5.91138,-3.48868 14.30706,-5.71875 23.59375,-5.71875 z"
	},
	{
		path: "m 363.54099,237.76377 c 10.8347,17.96279 14.82643,24.80576 30.22311,34.78509 15.39668,9.97933 35.07022,13.97106 48.75615,15.11155 13.68594,1.1405 35.07022,-1.14049 46.76029,-6.27272 11.69007,-5.13223 28.34535,-17.10742 32.62221,-22.80989 4.27686,-5.70248 9.86122,-13.11569 11.85709,-19.67354 -7.12809,15.96693 -13.15028,21.91993 -21.41887,28.7629 -8.26859,6.84297 -24.91373,16.00152 -27.76497,17.99738 -2.85124,1.99587 -4.1343,4.70454 -6.41529,5.27479 -0.28512,-3.13636 1.42563,-4.41941 1e-5,-4.13429 -0.28513,9.12396 1.15482,21.71832 -1.12617,23.71419 -2.28099,1.99587 -14.55564,5.65355 -21.11348,5.36843 -6.55785,-0.28512 -10.8347,-0.85537 -11.69007,-3.70661 -0.85537,-2.85124 -1.99587,-14.25618 -1.42562,-17.67767 0.57025,-3.42148 0.28512,-3.99173 0.28512,-3.99173 l 0,-1.99587 c -0.85537,11.11983 1.1405,22.8099 -0.57025,24.23552 -1.71074,1.42562 -10.8347,-0.28512 -15.6818,-0.28512 -4.8471,0 -11.40495,0.85537 -13.40081,-5.13223 -1.99587,-5.9876 -0.28513,-16.8223 -0.28513,-16.8223 1.71075,-3.99173 3.13637,-7.98346 3.13637,-7.98346 l -3.84918,3.42148 c -6.55784,-5.70248 -23.68378,-15.41694 -30.26189,-21.40454 -5.56673,-5.06701 -12.79599,-15.79398 -14.22161,-18.93034 -1.42561,-3.13636 -4.41521,-7.85102 -4.41521,-7.85102 z"
	}
	

];
/*! KineticJS v5.1.0 2014-03-27 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var Kinetic={};!function(a){var b=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var b=a.navigator&&a.navigator.userAgent||"",c=b.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[],e=!!b.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:d[1]||"",version:d[2]||"0",mobile:e}}(),Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},BaseLayer:function(a){this.___init(a)},Layer:function(a){this.____init(a)},FastLayer:function(a){this.____init(a)},Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){void 0!==b&&(void 0===this.names[b]&&(this.names[b]=[]),this.names[b].push(a))},_removeName:function(a,b){if(void 0!==a){var c=this.names[a];if(void 0!==c){for(var d=0;d<c.length;d++){var e=c[d];e._id===b&&c.splice(d,1)}0===c.length&&delete this.names[a]}}},getAngle:function(a){return this.angleDeg?a*b:a}}}(this),function(a,b){if("object"==typeof exports){var c=require("canvas"),d=require("jsdom").jsdom,e=d("<!DOCTYPE html><html><head></head><body></body></html>"),f=b();return Kinetic.document=e,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=c.Image,Kinetic.root=a,Kinetic._nodeCanvas=c,void(module.exports=f)}"function"==typeof define&&define.amd&&define(b),Kinetic.document=document,Kinetic.window=window,Kinetic.root=a}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,c=0;for(this.length=b;b>c;c++)this[c]=a[c];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)},Kinetic.Collection.prototype.toArray=function(){var a,b=[],c=this.length;for(a=0;c>a;a++)b.push(this[a]);return b},Kinetic.Collection.toCollection=function(a){var b,c=new Kinetic.Collection,d=a.length;for(b=0;d>b;b++)c.push(a[b]);return c},Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var b,c=this.length,d=[].slice.call(arguments);for(b=0;c>b;b++)this[b][a].apply(this[b],d);return this}},Kinetic.Collection.mapMethods=function(a){var b=a.prototype;for(var c in b)Kinetic.Collection._mapMethod(c)},Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var b=this.m;return{x:b[0]*a.x+b[2]*a.y+b[4],y:b[1]*a.x+b[3]*a.y+b[5]}},translate:function(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this},scale:function(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=this.m[0]*-c+this.m[2]*b,g=this.m[1]*-c+this.m[3]*b;return this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(a,b){var c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;return this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f,this},multiply:function(a){var b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var c=this.m[0],d=this.m[1],e=this.m[2],f=this.m[3],g=this.m[4],h=this.m[5],i=(c*(b-h)-d*(a-g))/(c*f-d*e),j=(a-g-e*i)/c;return this.translate(j,i)}};var a="2d",b="[object Array]",c="[object Number]",d="[object String]",e=Math.PI/180,f=180/Math.PI,g="#",h="",i="0",j="Kinetic warning: ",k="Kinetic error: ",l="rgb(",m={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},n=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return Object.prototype.toString.call(a)==b},_isNumber:function(a){return Object.prototype.toString.call(a)==c},_isString:function(a){return Object.prototype.toString.call(a)==d},_throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=(new Date).getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},_hasMethods:function(a){var b,c=[];for(b in a)this._isFunction(a[b])&&c.push(b);return c.length>0},createCanvasElement:function(){var a=Kinetic.document.createElement("canvas");return a.style=a.style||{},a},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(a){for(;a=a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var b,c,d=[],e=a.length,f=Kinetic.Util;for(b=0;e>b;b++)c=a[b],f._isNumber(c)?c=Math.round(1e3*c)/1e3:f._isString(c)||(c=c.toString()),d.push(c);return d},_getImage:function(b,c){var d,e;if(b)if(this._isElement(b))c(b);else if(this._isString(b))d=new Kinetic.window.Image,d.onload=function(){c(d)},d.src=b;else if(b.data){e=Kinetic.Util.createCanvasElement(),e.width=b.width,e.height=b.height;var f=e.getContext(a);f.putImageData(b,0,0),this._getImage(e.toDataURL(),c)}else c(null);else c(null)},_getRGBAString:function(a){var b=a.red||0,c=a.green||0,d=a.blue||0,e=a.alpha||1;return["rgba(",b,",",c,",",d,",",e,")"].join(h)},_rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace(g,h);var b=parseInt(a,16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a=i+a;return g+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in m?(b=m[a],{r:b[0],g:b[1],b:b[2]}):a[0]===g?this._hexToRgb(a.substring(1)):a.substr(0,4)===l?(b=n.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var c=this._clone(b);for(var d in a)c[d]=this._isObject(a[d])?this._merge(a[d],c[d]):a[d];return c},cloneObject:function(a){var b={};for(var c in a)b[c]=this._isObject(a[c])?this.cloneObject(a[c]):this._isArray(a[c])?this.cloneArray(a[c]):a[c];return b},cloneArray:function(a){return a.slice(0)},_degToRad:function(a){return a*e},_radToDeg:function(a){return a*f},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw new Error(k+a)},warn:function(a){Kinetic.root.console&&console.warn&&console.warn(j+a)},extend:function(a,b){for(var c in b.prototype)c in a.prototype||(a.prototype[c]=b.prototype[c])},addMethods:function(a,b){var c;for(c in b)a.prototype[c]=b[c]},_getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g*i/(h+i),l=c-j*(e-a),m=d-j*(f-b),n=c+k*(e-a),o=d+k*(f-b);return[l,m,n,o]},_expandPoints:function(a,b){var c,d,e=a.length,f=[];for(c=2;e-2>c;c+=2)d=Kinetic.Util._getControlPoints(a[c-2],a[c-1],a[c],a[c+1],a[c+2],a[c+3],b),f.push(d[0]),f.push(d[1]),f.push(a[c]),f.push(a[c+1]),f.push(d[2]),f.push(d[3]);return f},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}}(),function(){var a=Kinetic.Util.createCanvasElement(),b=a.getContext("2d"),c=Kinetic.UA.mobile?function(){var a=window.devicePixelRatio||1,c=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return a/c}():1;Kinetic.Canvas=function(a){this.init(a)},Kinetic.Canvas.prototype={init:function(a){a=a||{};var b=a.pixelRatio||Kinetic.pixelRatio||c;this.pixelRatio=b,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px"},setHeight:function(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(c){try{return this._canvas.toDataURL()}catch(d){return Kinetic.Util.warn("Unable to get data URL. "+d.message),""}}}},Kinetic.SceneCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.SceneContext(this),this.setSize(b,c)},Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a),c.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a),c.scale(b,b)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.HitContext(this),this.setSize(b,c)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=",",b="(",c=")",d="([",e="])",f=";",g="()",h="=",i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(a){this.init(a)},Kinetic.Context.prototype={init:function(a){this.canvas=a,this._context=a._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){var b=a.getFillEnabled();b&&this._fill(a),a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(i){var j,k,l,m,n=this.traceArr,o=n.length,p="";for(j=0;o>j;j++)k=n[j],l=k.method,l?(m=k.args,p+=l,p+=i?g:Kinetic.Util._isArray(m[0])?d+m.join(a)+e:b+m.join(a)+c):(p+=k.property,i||(p+=h+k.val)),p+=f;return p},clearTrace:function(){this.traceArr=[]},_trace:function(a){var b,c=this.traceArr;c.push(a),b=c.length,b>=Kinetic.traceArrMax&&c.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(a){var b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth(),b.getHeight())},_applyLineCap:function(a){var b=a.getLineCap();b&&this.setAttr("lineCap",b)},_applyOpacity:function(a){var b=a.getAbsoluteOpacity();1!==b&&this.setAttr("globalAlpha",b)},_applyLineJoin:function(a){var b=a.getLineJoin();b&&this.setAttr("lineJoin",b)},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var a=arguments;return 2===a.length?this._context.createImageData(a[0],a[1]):1===a.length?this._context.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){var a=arguments;this._context.rotate(a[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this._context;this._context.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.mozDash=a[0]:"webkitLineDash"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],a[1])},_enableTrace:function(){var a,b,c=this,d=i.length,e=Kinetic.Util._simplifyArray,f=this.setAttr,g=function(a){var d,f=c[a];c[a]=function(){return b=e(Array.prototype.slice.call(arguments,0)),d=f.apply(c,arguments),c._trace({method:a,args:b}),d}};for(a=0;d>a;a++)g(i[a]);c.setAttr=function(){f.apply(c,arguments),c._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)},Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.fill()||Kinetic.Util._getRGBAString({red:a.fillRed(),green:a.fillGreen(),blue:a.fillBlue(),alpha:a.fillAlpha()});this.setAttr("fillStyle",b),a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),c=a.getFillPatternX(),d=a.getFillPatternY(),e=a.getFillPatternScale(),f=Kinetic.getAngle(a.getFillPatternRotation()),g=a.getFillPatternOffset(),h=a.getFillPatternRepeat();(c||d)&&this.translate(c||0,d||0),f&&this.rotate(f),e&&this.scale(e.x,e.y),g&&this.translate(-1*g.x,-1*g.y),this.setAttr("fillStyle",this.createPattern(b,h||"repeat")),this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),c=a.getFillLinearGradientEndPoint(),d=a.getFillLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(var f=0;f<d.length;f+=2)e.addColorStop(d[f],d[f+1]);this.setAttr("fillStyle",e),this.fill()}},_fillRadialGradient:function(a){for(var b=a.getFillRadialGradientStartPoint(),c=a.getFillRadialGradientEndPoint(),d=a.getFillRadialGradientStartRadius(),e=a.getFillRadialGradientEndRadius(),f=a.getFillRadialGradientColorStops(),g=this.createRadialGradient(b.x,b.y,d,c.x,c.y,e),h=0;h<f.length;h+=2)g.addColorStop(f[h],f[h+1]);this.setAttr("fillStyle",g),this.fill()},_fill:function(a){var b=a.fill()||a.fillRed()||a.fillGreen()||a.fillBlue(),c=a.getFillPatternImage(),d=a.getFillLinearGradientColorStops(),e=a.getFillRadialGradientColorStops(),f=a.getFillPriority();b&&"color"===f?this._fillColor(a):c&&"pattern"===f?this._fillPattern(a):d&&"linear-gradient"===f?this._fillLinearGradient(a):e&&"radial-gradient"===f?this._fillRadialGradient(a):b?this._fillColor(a):c?this._fillPattern(a):d?this._fillLinearGradient(a):e&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.dash(),c=a.getStrokeScaleEnabled();a.hasStroke()&&(c||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),b&&a.dashEnabled()&&this.setLineDash(b),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.stroke()||Kinetic.Util._getRGBAString({red:a.strokeRed(),green:a.strokeGreen(),blue:a.strokeBlue(),alpha:a.strokeAlpha()})),a._strokeFunc(this),c||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,c=a.getAbsoluteOpacity(),d=b.get(a.getShadowColor(),"black"),e=b.get(a.getShadowBlur(),5),f=b.get(a.getShadowOpacity(),1),g=b.get(a.getShadowOffset(),{x:0,y:0});f&&this.setAttr("globalAlpha",f*c),this.setAttr("shadowColor",d),this.setAttr("shadowBlur",e),this.setAttr("shadowOffsetX",g.x),this.setAttr("shadowOffsetY",g.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(a){Kinetic.Context.call(this,a)},Kinetic.HitContext.prototype={_fill:function(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()},_stroke:function(a){a.hasStroke()&&(this._applyLineCap(a),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var a="get",b="set";Kinetic.Factory={addGetterSetter:function(a,b,c,d,e){this.addGetter(a,b,c),this.addSetter(a,b,d,e),this.addOverloadedGetterSetter(a,b)},addGetter:function(b,c,d){var e=a+Kinetic.Util._capitalize(c);b.prototype[e]=function(){var a=this.attrs[c];return void 0===a?d:a}},addSetter:function(a,c,d,e){var f=b+Kinetic.Util._capitalize(c);a.prototype[f]=function(a){return d&&(a=d.call(this,a)),this._setAttr(c,a),e&&e.call(this),this}},addComponentsGetterSetter:function(c,d,e,f,g){var h,i,j=e.length,k=Kinetic.Util._capitalize,l=a+k(d),m=b+k(d);c.prototype[l]=function(){var a={};for(h=0;j>h;h++)i=e[h],a[i]=this.getAttr(d+k(i));return a},c.prototype[m]=function(a){var b,c=this.attrs[d];f&&(a=f.call(this,a));for(b in a)this._setAttr(d+k(b),a[b]);return this._fireChangeEvent(d,c,a),g&&g.call(this),this},this.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter:function(c,d){var e=Kinetic.Util._capitalize(d),f=b+e,g=a+e;c.prototype[d]=function(){return arguments.length?(this[f](arguments[0]),this):this[g]()}},backCompat:function(a,b){var c;for(c in b)a.prototype[c]=a.prototype[b[c]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(a){return a>255?255:0>a?0:Math.round(a)},alphaComponent:function(a){return a>1?1:1e-4>a?1e-4:a}}}(),function(){var a="absoluteOpacity",b="absoluteTransform",c="Change",d="children",e=".",f="",g="get",h="id",i="kinetic",j="listening",k="mouseenter",l="mouseleave",m="name",n="set",o="Shape",p=" ",q="stage",r="transform",s="Stage",t="visible",u=["id"],v=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(p);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(c){var d=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(c),this.on(v,function(){this._clearCache(r),d._clearSelfAndDescendantCache(b)}),this.on("visibleChange.kinetic",function(){d._clearSelfAndDescendantCache(t)}),this.on("listeningChange.kinetic",function(){d._clearSelfAndDescendantCache(j)}),this.on("opacityChange.kinetic",function(){d._clearSelfAndDescendantCache(a)})},_clearCache:function(a){a?delete this._cache[a]:this._cache={}},_getCache:function(a,b){var c=this._cache[a];return void 0===c&&(this._cache[a]=b.call(this)),this._cache[a]},_clearSelfAndDescendantCache:function(a){this._clearCache(a),this.children&&this.getChildren().each(function(b){b._clearSelfAndDescendantCache(a)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(a){{var b=a||{},c=b.x||0,d=b.y||0,e=b.width||this.width(),f=b.height||this.height(),g=b.drawBorder||!1;this.getLayer()}if(0===e||0===f)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var h=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),i=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),j=new Kinetic.HitCanvas({width:e,height:f}),k=(this.transformsEnabled(),this.x(),this.y(),h.getContext()),l=j.getContext();return this.clearCache(),k.save(),l.save(),g&&(k.save(),k.beginPath(),k.rect(0,0,e,f),k.closePath(),k.setAttr("strokeStyle","red"),k.setAttr("lineWidth",5),k.stroke(),k.restore()),k.translate(-1*c,-1*d),l.translate(-1*c,-1*d),"Shape"===this.nodeType&&(k.translate(-1*this.x(),-1*this.y()),l.translate(-1*this.x(),-1*this.y())),this.drawScene(h,this),this.drawHit(j,this),k.restore(),l.restore(),this._cache.canvas={scene:h,filter:i,hit:j},this},_drawCachedSceneCanvas:function(a){a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(this._getCachedSceneCanvas()._canvas,0,0),a.restore()},_getCachedSceneCanvas:function(){var a,b,c,d,e=this.filters(),f=this._cache.canvas,g=f.scene,h=f.filter,i=h.getContext();if(e){if(!this._filterUpToDate){try{for(a=e.length,i.clear(),i.drawImage(g._canvas,0,0),b=i.getImageData(0,0,h.getWidth(),h.getHeight()),c=0;a>c;c++)d=e[c],d.call(this,b),i.putImageData(b,0,0)}catch(j){Kinetic.Util.warn("Unable to apply filter. "+j.message)}this._filterUpToDate=!0}return h}return g},_drawCachedHitCanvas:function(a){var b=this._cache.canvas,c=b.hit;a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(c._canvas,0,0),a.restore()},on:function(a,b){var c,d,g,h,i,j=a.split(p),k=j.length;for(c=0;k>c;c++)d=j[c],g=d.split(e),h=g[0],i=g[1]||f,this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:i,handler:b});return this},off:function(a){var b,c,d,f,g,h,i=a.split(p),j=i.length;for(b=0;j>b;b++)if(d=i[b],f=d.split(e),g=f[0],h=f[1],g)this.eventListeners[g]&&this._off(g,h);else for(c in this.eventListeners)this._off(c,h);return this},dispatchEvent:function(a){var b={target:this,type:a.type,evt:a};this.fire(a.type,b)},addEventListener:function(a,b){this.on(a,function(a){b.call(this,a.evt)})},remove:function(){var c=this.getParent();return c&&c.children&&(c.children.splice(this.index,1),c._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(a),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(a){var b=g+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,c;if(a)for(b in a)b===d||(c=n+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache(j,this._isListening)},_isListening:function(){var a=this.getListening(),b=this.getParent();return"inherit"===a?b?b.isListening():!0:a},isVisible:function(){return this._getCache(t,this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return"inherit"===a?b?b.isVisible():!0:a},shouldDrawHit:function(){var a=this.getLayer();return a&&a.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(i){for(b=[],c=i.length,d=0;c>d;d++)e=i[d],h++,e.nodeType!==o&&(b=b.concat(e.getChildren().toArray())),e._id===g._id&&(d=c);b.length>0&&b[0].getDepth()<=f&&a(b)}var b,c,d,e,f=this.getDepth(),g=this,h=0;return g.nodeType!==s&&a(g.getStage().getChildren()),h},getDepth:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,c=this.offset();return b.m=a.slice(),b.translate(c.x,c.y),b.getTranslation()},setAbsolutePosition:function(a){var b,c=this._clearTransform();return this.attrs.x=c.x,this.attrs.y=c.y,delete c.x,delete c.y,b=this.getAbsoluteTransform(),b.invert(),b.translate(a.x,a.y),a={x:this.attrs.x+b.getTranslation().x,y:this.attrs.y+b.getTranslation().y},this.setPosition({x:a.x,y:a.y}),this._setTransform(c),this},_setTransform:function(a){var c;for(c in a)this.attrs[c]=a[c];this._clearCache(r),this._clearSelfAndDescendantCache(b)},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(r),this._clearSelfAndDescendantCache(b),a},move:function(a){var b=a.x,c=a.y,d=this.getX(),e=this.getY();return void 0!==b&&(d+=b),void 0!==c&&(e+=c),this.setPosition({x:d,y:e}),this},_eachAncestorReverse:function(a,b){var c,d,e=[],f=this.getParent();if(b&&b._id===this._id)return a(this),!0;for(e.unshift(this);f&&(!b||f._id!==b._id);)e.unshift(f),f=f.parent;for(c=e.length,d=0;c>d;d++)a(e[d])},rotate:function(a){return this.setRotation(this.getRotation()+a),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var a=this.index;return this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var a=this.index,b=this.parent.getChildren().length;return b-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(a,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return Kinetic.Node.prototype.remove.call(this),a.add(this),this},toObject:function(){var a,b,c,d,e=Kinetic.Util,f={},g=this.getAttrs();f.attrs={};for(a in g)b=g[a],e._isFunction(b)||e._isElement(b)||e._isObject(b)&&e._hasMethods(b)||(c=this[a],delete g[a],d=c?c.call(this):null,g[a]=b,d!==b&&(f.attrs[a]=b));return f.className=this.getClassName(),f},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var a=this.getParent();return a?a.getLayer():null},getStage:function(){return this._getCache(q,this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,c){return c?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(a){return a?this._getAbsoluteTransform(a):this._getCache(b,this._getAbsoluteTransform)},_getAbsoluteTransform:function(a){var b,c,d=new Kinetic.Transform;return this._eachAncestorReverse(function(a){b=a.transformsEnabled(),c=a.getTransform(),"all"===b?d.multiply(c):"position"===b&&d.translate(a.x(),a.y())},a),d},getTransform:function(){return this._getCache(r,this._getTransform)},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),c=this.getY(),d=Kinetic.getAngle(this.getRotation()),e=this.getScaleX(),f=this.getScaleY(),g=this.getSkewX(),h=this.getSkewY(),i=this.getOffsetX(),j=this.getOffsetY();return(0!==b||0!==c)&&a.translate(b,c),0!==d&&a.rotate(d),(0!==g||0!==h)&&a.skew(g,h),(1!==e||1!==f)&&a.scale(e,f),(0!==i||0!==j)&&a.translate(-1*i,-1*j),a},clone:function(a){var b,c,d,e,f,g=this.getClassName(),h=Kinetic.Util.cloneObject(this.attrs);for(var j in u){var k=u[j];delete h[k]}for(b in a)h[b]=a[b];var l=new Kinetic[g](h);for(b in this.eventListeners)for(c=this.eventListeners[b],d=c.length,e=0;d>e;e++)f=c[e],f.name.indexOf(i)<0&&(l.eventListeners[b]||(l.eventListeners[b]=[]),l.eventListeners[b].push(f));return l},toDataURL:function(a){a=a||{};var b=a.mimeType||null,c=a.quality||null,d=this.getStage(),e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth()||(d?d.getWidth():0),height:a.height||this.getHeight()||(d?d.getHeight():0),pixelRatio:1}),h=g.getContext();return h.save(),(e||f)&&h.translate(-1*e,-1*f),this.drawScene(g),h.restore(),g.toDataURL(b,c)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(a){return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(a){return this.nodeType===a?[this]:[]},_off:function(a,b){var c,d,e=this.eventListeners[a];for(c=0;c<e.length;c++)if(d=e[c].name,!("kinetic"===d&&"kinetic"!==b||b&&d!==b)){if(e.splice(c,1),0===e.length){delete this.eventListeners[a];break}c--}},_fireChangeEvent:function(a,b,d){this._fire(a+c,{oldVal:b,newVal:d})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr(h,a),this
},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr(m,a),this},setAttr:function(){var a=Array.prototype.slice.call(arguments),b=a[0],c=a[1],d=n+Kinetic.Util._capitalize(b),e=this[d];return Kinetic.Util._isFunction(e)?e.call(this,c):this._setAttr(b,c),this},_setAttr:function(a,b){var c;void 0!==b&&(c=this.attrs[a],this.attrs[a]=b,this._fireChangeEvent(a,c,b))},_setComponentAttr:function(a,b,c){var d;void 0!==c&&(d=this.attrs[a],d||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=c,this._fireChangeEvent(a,d,c))},_fireAndBubble:function(a,b,c){var d=!0;b&&this.nodeType===o&&(b.target=this),a===k&&c&&this._id===c._id?d=!1:a===l&&c&&this._id===c._id&&(d=!1),d&&(this._fire(a,b),b&&!b.cancelBubble&&this.parent&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c.parent):this._fireAndBubble.call(this.parent,a,b)))},_fire:function(a,b){var c,d=this.eventListeners[a];if(b.type=a,d)for(c=0;c<d.length;c++)d[c].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)},Kinetic.Node._createNode=function(a,b){var c,d,e,f=Kinetic.Node.prototype.getClassName.call(a),g=a.children;if(b&&(a.attrs.container=b),c=new Kinetic[f](a.attrs),g)for(d=g.length,e=0;d>e;e++)c.add(this._createNode(g[e]));return c},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(a){return this._filterUpToDate=!1,a}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(a){var b,c,d=a.data,e=d.length;for(b=0;e>b;b+=4)c=.34*d[b]+.5*d[b+1]+.16*d[b+2],d[b]=c,d[b+1]=c,d[b+2]=c}}(),function(){Kinetic.Filters.Brighten=function(a){var b,c=255*this.brightness(),d=a.data,e=d.length;for(b=0;e>b;b+=4)d[b]+=c,d[b+1]+=c,d[b+2]+=c},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(a){var b,c=a.data,d=c.length;for(b=0;d>b;b+=4)c[b]=255-c[b],c[b+1]=255-c[b+1],c[b+2]=255-c[b+2]}}(),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=b.data,E=b.width,F=b.height,G=e+e+1,H=E-1,I=F-1,J=e+1,K=J*(J+1)/2,L=new a,M=null,N=L,O=null,P=null,Q=c[e],R=d[e];for(h=1;G>h;h++)N=N.next=new a,h==J&&(M=N);for(N.next=L,l=k=0,g=0;F>g;g++){for(u=v=w=x=m=n=o=p=0,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(h=1;J>h;h++)i=k+((h>H?H:h)<<2),m+=(N.r=y=D[i])*(C=J-h),n+=(N.g=z=D[i+1])*C,o+=(N.b=A=D[i+2])*C,p+=(N.a=B=D[i+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next;for(O=L,P=M,f=0;E>f;f++)D[k+3]=B=p*Q>>R,0!==B?(B=255/B,D[k]=(m*Q>>R)*B,D[k+1]=(n*Q>>R)*B,D[k+2]=(o*Q>>R)*B):D[k]=D[k+1]=D[k+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=l+((i=f+e+1)<H?i:H)<<2,u+=O.r=D[i],v+=O.g=D[i+1],w+=O.b=D[i+2],x+=O.a=D[i+3],m+=u,n+=v,o+=w,p+=x,O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=4;l+=E}for(f=0;E>f;f++){for(v=w=x=u=n=o=p=m=0,k=f<<2,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(j=E,h=1;e>=h;h++)k=j+f<<2,m+=(N.r=y=D[k])*(C=J-h),n+=(N.g=z=D[k+1])*C,o+=(N.b=A=D[k+2])*C,p+=(N.a=B=D[k+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next,I>h&&(j+=E);for(k=f,O=L,P=M,g=0;F>g;g++)i=k<<2,D[i+3]=B=p*Q>>R,B>0?(B=255/B,D[i]=(m*Q>>R)*B,D[i+1]=(n*Q>>R)*B,D[i+2]=(o*Q>>R)*B):D[i]=D[i+1]=D[i+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=f+((i=g+J)<I?i:I)*E<<2,m+=u+=O.r=D[i],n+=v+=O.g=D[i+1],o+=w+=O.b=D[i+2],p+=x+=O.a=D[i+3],O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=E}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var c=Math.round(this.blurRadius());c>0&&b(a,c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c){var d=4*(c*a.width+b),e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function b(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}function c(a){for(var b=[0,0,0],c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}function d(d,e){var f=a(d,0,0),g=a(d,d.width-1,0),h=a(d,0,d.height-1),i=a(d,d.width-1,d.height-1),j=e||10;if(b(f,g)<j&&b(g,i)<j&&b(i,h)<j&&b(h,f)<j){for(var k=c([g,f,i,h]),l=[],m=0;m<d.width*d.height;m++){var n=b(k,[d.data[4*m],d.data[4*m+1],d.data[4*m+2]]);l[m]=j>n?0:255}return l}}function e(a,b){for(var c=0;c<a.width*a.height;c++)a.data[4*c+3]=b[c]}function f(a,b,c){for(var d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=2040===k?255:0}return g}function g(a,b,c){for(var d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k>=1020?255:0}return g}function h(a,b,c){for(var d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k}return g}Kinetic.Filters.Mask=function(a){var b=this.threshold(),c=d(a,b);return c&&(c=f(c,a.width,a.height),c=g(c,a.width,a.height),c=h(c,a.width,a.height),e(a,c)),a},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(a){var b,c,d=a.data,e=d.length,f=this.red(),g=this.green(),h=this.blue();for(b=0;e>b;b+=4)c=(.34*d[b]+.5*d[b+1]+.16*d[b+2])/255,d[b]=c*f,d[b+1]=c*g,d[b+2]=c*h,d[b+3]=d[b+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=Math.pow(2,this.value()),j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=i*j*Math.cos(k*Math.PI/180),m=i*j*Math.sin(k*Math.PI/180),n=.299*i+.701*l+.167*m,o=.587*i-.587*l+.33*m,p=.114*i-.114*l-.497*m,q=.299*i-.299*l-.328*m,r=.587*i+.413*l+.035*m,s=.114*i-.114*l+.293*m,t=.299*i-.3*l+1.25*m,u=.587*i-.586*l-1.05*m,v=.114*i+.886*l-.2*m;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=n*c+o*d+p*e,g[b+1]=q*c+r*d+s*e,g[b+2]=t*c+u*d+v*e,g[b+3]=f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=1,j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=127*this.luminance(),m=i*j*Math.cos(k*Math.PI/180),n=i*j*Math.sin(k*Math.PI/180),o=.299*i+.701*m+.167*n,p=.587*i-.587*m+.33*n,q=.114*i-.114*m-.497*n,r=.299*i-.299*m-.328*n,s=.587*i+.413*m+.035*n,t=.114*i-.114*m+.293*n,u=.299*i-.3*m+1.25*n,v=.587*i-.586*m-1.05*n,w=.114*i+.886*m-.2*n;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=o*c+p*d+q*e+l,g[b+1]=r*c+s*d+t*e+l,g[b+2]=u*c+v*d+w*e+l,g[b+3]=f}}(),function(){Kinetic.Filters.Emboss=function(a){var b=10*this.embossStrength(),c=255*this.embossWhiteLevel(),d=this.embossDirection(),e=this.embossBlend(),f=0,g=0,h=a.data,i=a.width,j=a.height,k=4*i,l=j;switch(d){case"top-left":f=-1,g=-1;break;case"top":f=-1,g=0;break;case"top-right":f=-1,g=1;break;case"right":f=0,g=1;break;case"bottom-right":f=1,g=1;break;case"bottom":f=1,g=0;break;case"bottom-left":f=1,g=-1;break;case"left":f=0,g=-1}do{var m=(l-1)*k,n=f;1>l+n&&(n=0),l+n>j&&(n=0);var o=(l-1+n)*i*4,p=i;do{var q=m+4*(p-1),r=g;1>p+r&&(r=0),p+r>i&&(r=0);var s=o+4*(p-1+r),t=h[q]-h[s],u=h[q+1]-h[s+1],v=h[q+2]-h[s+2],w=t,x=w>0?w:-w,y=u>0?u:-u,z=v>0?v:-v;if(y>x&&(w=u),z>x&&(w=v),w*=b,e){var A=h[q]+w,B=h[q+1]+w,C=h[q+2]+w;h[q]=A>255?255:0>A?0:A,h[q+1]=B>255?255:0>B?0:B,h[q+2]=C>255?255:0>C?0:C}else{var D=c-w;0>D?D=0:D>255&&(D=255),h[q]=h[q+1]=h[q+2]=D}}while(--p)}while(--l)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c,d,e){var f,g=c-b,h=e-d;return 0===g?d+h/2:0===h?d:(f=(a-b)/g,f=h*f+d)}Kinetic.Filters.Enhance=function(b){var c,d,e,f,g=b.data,h=g.length,i=g[0],j=i,k=g[1],l=k,m=g[2],n=m,o=g[3],p=o,q=this.enhance();if(0!==q){for(f=0;h>f;f+=4)c=g[f+0],i>c?i=c:c>j&&(j=c),d=g[f+1],k>d?k=d:d>l&&(l=d),e=g[f+2],m>e?m=e:e>n&&(n=e);j===i&&(j=255,i=0),l===k&&(l=255,k=0),n===m&&(n=255,m=0),p===o&&(p=255,o=0);var r,s,t,u,v,w,x,y,z,A,B,C;for(q>0?(s=j+q*(255-j),t=i-q*(i-0),v=l+q*(255-l),w=k-q*(k-0),y=n+q*(255-n),C=m-q*(m-0),B=p+q*(255-p),z=o-q*(o-0)):(r=.5*(j+i),s=j+q*(j-r),t=i+q*(i-r),u=.5*(l+k),v=l+q*(l-u),w=k+q*(k-u),x=.5*(n+m),y=n+q*(n-x),C=m+q*(m-x),A=.5*(p+o),B=p+q*(p-A),z=o+q*(o-A)),f=0;h>f;f+=4)g[f+0]=a(g[f+0],i,j,t,s),g[f+1]=a(g[f+1],k,l,w,v),g[f+2]=a(g[f+2],m,n,C,y)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(a){var b,c=Math.round(254*this.levels())+1,d=a.data,e=d.length,f=255/c;for(b=0;e>b;b+=1)d[b]=Math.floor(d[b]/f)*f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(a){var b,c=255*this.noise(),d=a.data,e=d.length,f=c/2;for(b=0;e>b;b+=4)d[b+0]+=f-2*f*Math.random(),d[b+1]+=f-2*f*Math.random(),d[b+2]+=f-2*f*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=Math.ceil(this.pixelSize()),q=a.width,r=a.height,s=Math.ceil(q/p),t=Math.ceil(r/p);for(a=a.data,m=0;s>m;m+=1)for(n=0;t>n;n+=1){for(e=0,f=0,g=0,h=0,i=m*p,j=i+p,k=n*p,l=k+p,o=0,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),e+=a[d+0],f+=a[d+1],g+=a[d+2],h+=a[d+3],o+=1);for(e/=o,f/=o,g/=o,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),a[d+0]=e,a[d+1]=f,a[d+2]=g,a[d+3]=h)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(a){var b,c=255*this.threshold(),d=a.data,e=d.length;for(b=0;e>b;b+=1)d[b]=d[b]<c?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(a){var b,c,d,e,f,g,h,i,j,k=a.data,l=a.width,m=a.height,n=4*l;do{b=(m-1)*n,c=l;do d=b+4*(c-1),e=k[d],f=k[d+1],g=k[d+2],h=.393*e+.769*f+.189*g,i=.349*e+.686*f+.168*g,j=.272*e+.534*f+.131*g,k[d]=h>255?255:h,k[d+1]=i>255?255:i,k[d+2]=j>255?255:j,k[d+3]=k[d+3];while(--c)}while(--m)}}(),function(){Kinetic.Filters.Solarize=function(a){var b=a.data,c=a.width,d=a.height,e=4*c,f=d;do{var g=(f-1)*e,h=c;do{var i=g+4*(h-1),j=b[i],k=b[i+1],l=b[i+2];j>127&&(j=255-j),k>127&&(k=255-k),l>127&&(l=255-l),b[i]=j,b[i+1]=k,b[i+2]=l}while(--h)}while(--f)}}(),function(){var a=function(a,b,c){var d,e,f,g,h=a.data,i=b.data,j=a.width,k=a.height,l=c.polarCenterX||j/2,m=c.polarCenterY||k/2,n=0,o=0,p=0,q=0,r=Math.sqrt(l*l+m*m);e=j-l,f=k-m,g=Math.sqrt(e*e+f*f),r=g>r?g:r;var s,t,u,v,w=k,x=j,y=360/x*Math.PI/180;for(t=0;x>t;t+=1)for(u=Math.sin(t*y),v=Math.cos(t*y),s=0;w>s;s+=1)e=Math.floor(l+r*s/w*v),f=Math.floor(m+r*s/w*u),d=4*(f*j+e),n=h[d+0],o=h[d+1],p=h[d+2],q=h[d+3],d=4*(t+s*j),i[d+0]=n,i[d+1]=o,i[d+2]=p,i[d+3]=q},b=function(a,b,c){var d,e,f,g,h,i,j=a.data,k=b.data,l=a.width,m=a.height,n=c.polarCenterX||l/2,o=c.polarCenterY||m/2,p=0,q=0,r=0,s=0,t=Math.sqrt(n*n+o*o);e=l-n,f=m-o,i=Math.sqrt(e*e+f*f),t=i>t?i:t;var u,v,w,x,y=m,z=l,A=c.polarRotation||0;for(e=0;l>e;e+=1)for(f=0;m>f;f+=1)g=e-n,h=f-o,u=Math.sqrt(g*g+h*h)*y/t,v=(180*Math.atan2(h,g)/Math.PI+360+A)%360,v=v*z/360,w=Math.floor(v),x=Math.floor(u),d=4*(x*l+w),p=j[d+0],q=j[d+1],r=j[d+2],s=j[d+3],d=4*(f*l+e),k[d+0]=p,k[d+1]=q,k[d+2]=r,k[d+3]=s},c=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(d){var e,f,g,h,i,j,k,l,m,n,o=d.width,p=d.height,q=Math.round(this.kaleidoscopePower()),r=Math.round(this.kaleidoscopeAngle()),s=Math.floor(o*(r%360)/360);if(!(1>q)){c.width=o,c.height=p;var t=c.getContext("2d").getImageData(0,0,o,p);a(d,t,{polarCenterX:o/2,polarCenterY:p/2});for(var u=o/Math.pow(2,q);8>=u;)u=2*u,q-=1;u=Math.ceil(u);var v=u,w=0,x=v,y=1;for(s+u>o&&(w=v,x=0,y=-1),f=0;p>f;f+=1)for(e=w;e!==x;e+=y)g=Math.round(e+s)%o,m=4*(o*f+g),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+e),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;for(f=0;p>f;f+=1)for(v=Math.floor(u),h=0;q>h;h+=1){for(e=0;v+1>e;e+=1)m=4*(o*f+e),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+2*v-e-1),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;v*=2}b(t,d,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a){Kinetic.root.setTimeout(a,1e3/60)}function b(){return e.apply(Kinetic.root,arguments)}var c=500,d=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),e=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||a}();Kinetic.Animation=function(a,b){var c=Kinetic.Animation;this.func=a,this.setLayers(b),this.id=c.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d()}},Kinetic.Animation.prototype={setLayers:function(a){var b=[];b=a?a.length>0?a:[a]:[],this.layers=b},getLayers:function(){return this.layers},addLayer:function(a){var b,c,d=this.layers;if(d){for(b=d.length,c=0;b>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,b=Kinetic.Animation,c=b.animations,d=c.length;for(a=0;d>a;a++)if(c[a].id===this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d(),a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(a){this.animations.push(a),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(a){var b,c=a.id,d=this.animations,e=d.length;for(b=0;e>b;b++)if(d[b].id===c){this.animations.splice(b,1);break}},Kinetic.Animation._runFrames=function(){var a,b,c,e,f,g,h,i,j={},k=this.animations;for(e=0;e<k.length;e++){for(a=k[e],b=a.layers,c=a.func,a._updateFrameObject(d()),g=b.length,f=0;g>f;f++)h=b[f],void 0!==h._id&&(j[h._id]=h);c&&c.call(a,a.frame)}for(i in j)j[i].draw()},Kinetic.Animation._animationLoop=function(){var a=Kinetic.Animation;a.animations.length?(b(a._animationLoop),a._runFrames()):a.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var a=this;this.animRunning||(this.animRunning=!0,a._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)},Kinetic.Layer.prototype.batchDraw=function(){var a=this,b=Kinetic.Animation;this.batchAnim||(this.batchAnim=new b(function(){a.lastBatchDrawTime&&d()-a.lastBatchDrawTime>c&&a.batchAnim.stop()},this)),this.lastBatchDrawTime=d(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}}((1,eval)("this")),function(){var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},b=1,c=2,d=3,e=0;Kinetic.Tween=function(b){var c,d=this,g=b.node,h=g._id,i=b.duration||1,j=b.easing||Kinetic.Easings.Linear,k=!!b.yoyo;this.node=g,this._id=e++,this.anim=new Kinetic.Animation(function(){d.tween.onEnterFrame()},g.getLayer()),this.tween=new f(c,function(a){d._tweenFunc(a)},j,0,1,1e3*i,k),this._addListeners(),Kinetic.Tween.attrs[h]||(Kinetic.Tween.attrs[h]={}),Kinetic.Tween.attrs[h][this._id]||(Kinetic.Tween.attrs[h][this._id]={}),Kinetic.Tween.tweens[h]||(Kinetic.Tween.tweens[h]={});for(c in b)void 0===a[c]&&this._addAttr(c,b[c]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(a,b){var c,d,e,f,g,h=this.node,i=h._id;if(e=Kinetic.Tween.tweens[i][a],e&&delete Kinetic.Tween.attrs[i][e][a],c=h.getAttr(a),Kinetic.Util._isArray(b))for(d=[],g=b.length,f=0;g>f;f++)d.push(b[f]-c[f]);else d=b-c;Kinetic.Tween.attrs[i][this._id][a]={start:c,diff:d},Kinetic.Tween.tweens[i][a]=this._id},_tweenFunc:function(a){var b,c,d,e,f,g,h,i=this.node,j=Kinetic.Tween.attrs[i._id][this._id];for(b in j){if(c=j[b],d=c.start,e=c.diff,Kinetic.Util._isArray(d))for(f=[],h=d.length,g=0;h>g;g++)f.push(d[g]+e[g]*a);else f=d+e*a;i.setAttr(b,f)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()},this.tween.onReverse=function(){a.anim.start()},this.tween.onPause=function(){a.anim.stop()},this.tween.onFinish=function(){a.onFinish&&a.onFinish()},this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){this.node;return this.tween.reset(),this},seek:function(a){this.node;return this.tween.seek(1e3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){this.node;return this.tween.finish(),this},destroy:function(){var a,b=this.node._id,c=this._id,d=Kinetic.Tween.tweens[b];this.pause();for(a in d)delete Kinetic.Tween.tweens[b][a];delete Kinetic.Tween.attrs[b][c]}};var f=function(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()};f.prototype={fire:function(a){var b=this[a];b&&b()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;this.state===c?this.setTime(a):this.state===d&&this.setTime(this.duration-a)},pause:function(){this.state=b,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},BackEaseOut:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},BackEaseInOut:function(a,b,c,d){var e=1.70158;return(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},ElasticEaseIn:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b)},ElasticEaseOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b)},ElasticEaseInOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b)},BounceEaseOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,c,d){return c-Kinetic.Easings.BounceEaseOut(d-a,0,c,d)+b},BounceEaseInOut:function(a,b,c,d){return d/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,c,d)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-d,0,c,d)+.5*c+b},EaseIn:function(a,b,c,d){return c*(a/=d)*a+b},EaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},EaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},StrongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,c,d){return c*a/d+b}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,c=b.node;if(c){if(!b.isDragging){var d=c.getStage().getPointerPosition(),e=c.dragDistance(),f=Math.max(Math.abs(d.x-b.startPointerPos.x),Math.abs(d.y-b.startPointerPos.y));if(e>f)return}c._setDragPosition(a),b.isDragging||(b.isDragging=!0,c.fire("dragstart",{type:"dragstart",target:c,evt:a},!0)),c.fire("dragmove",{type:"dragmove",target:c,evt:a},!0)}},_endDragBefore:function(a){var b,c,d=Kinetic.DD,e=d.node;e&&(b=e.nodeType,c=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=e)),delete d.node,(c||e).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire("dragend",{type:"dragend",target:b,evt:a},!0)}},Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),c=this.getLayer(),d=b.getPointerPosition(),e=this.getAbsolutePosition();d&&(a.node&&a.node.stopDrag(),a.node=this,a.startPointerPos=d,a.offset.x=d.x-e.x,a.offset.y=d.y-e.y,a.anim.setLayers(c||this.getLayers()),a.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,c=this.getStage().getPointerPosition(),d=this.getDragBoundFunc();if(c){var e={x:c.x-b.offset.x,y:c.y-b.offset.y};void 0!==d&&(e=d.call(this,e,a)),this.setAbsolutePosition(e)}},Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b),a._endDragAfter(b)},Kinetic.Node.prototype.setDraggable=function(a){this._setAttr("draggable",a),this._dragChange()};var a=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var b=Kinetic.DD;b.node&&b.node._id===this._id&&this.stopDrag(),a.call(this)},Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return a.node&&a.node._id===this._id&&a.isDragging},Kinetic.Node.prototype._listenDrag=function(){var a=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on("mousedown.kinetic touchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var b=Kinetic.document.documentElement;b.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),b.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),b.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),b.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(a){this.children=new Kinetic.Collection,Kinetic.Node.call(this,a)},getChildren:function(a){if(a){var b=new Kinetic.Collection;return this.children.each(function(c){a(c)&&b.push(c)}),b}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.hasChildren()&&a.removeChildren(),a.remove();return b=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.destroy();return b=null,this.children=new Kinetic.Collection,this},add:function(a){if(!(arguments.length>1)){if(a.getParent())return void a.moveTo(this);var b=this.children;return this._validateAdd(a),a.index=b.length,a.parent=this,b.push(a),this._fire("add",{child:a}),this}for(var c=0;c<arguments.length;c++)this.add(arguments[c])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(a){var b,c,d,e,f,g,h,i=[],j=a.replace(/ /g,"").split(","),k=j.length;for(b=0;k>b;b++)if(d=j[b],"#"===d.charAt(0))f=this._getNodeById(d.slice(1)),f&&i.push(f);else if("."===d.charAt(0))e=this._getNodesByName(d.slice(1)),i=i.concat(e);else for(g=this.getChildren(),h=g.length,c=0;h>c;c++)i=i.concat(g[c]._get(d));return Kinetic.Collection.toCollection(i)},_getNodeById:function(a){var b=Kinetic.ids[a];return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(a){var b=Kinetic.names[a]||[];return this._getDescendants(b)},_get:function(a){for(var b=Kinetic.Node.prototype._get.call(this,a),c=this.getChildren(),d=c.length,e=0;d>e;e++)b=b.concat(c[e]._get(a));return b},toObject:function(){var a=Kinetic.Node.prototype.toObject.call(this);a.children=[];for(var b=this.getChildren(),c=b.length,d=0;c>d;d++){var e=b[d];a.children.push(e.toObject())}return a},_getDescendants:function(a){for(var b=[],c=a.length,d=0;c>d;d++){var e=a[d];this.isAncestorOf(e)&&b.push(e)}return b},isAncestorOf:function(a){for(var b=a.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(a){var b=Kinetic.Node.prototype.clone.call(this,a);return this.getChildren().each(function(a){b.add(a.clone())}),b},getAllIntersections:function(a){var b=[];return this.find("Shape").each(function(c){c.isVisible()&&c.intersects(a)&&b.push(c)}),b},_setChildrenIndices:function(){this.children.each(function(a,b){a.index=b})},drawScene:function(a,b){var c=this.getLayer(),d=a||c&&c.getCanvas(),e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.scene;return this.isVisible()&&(g?this._drawCachedSceneCanvas(e):this._drawChildren(d,"drawScene",b)),this
},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas,e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.hit;return this.shouldDrawHit()&&(g?this._drawCachedHitCanvas(e):this._drawChildren(d,"drawHit",b)),this},_drawChildren:function(a,b,c){var d,e,f=this.getLayer(),g=a&&a.getContext(),h=this.getClipWidth(),i=this.getClipHeight(),j=h&&i;j&&f&&(d=this.getClipX(),e=this.getClipY(),g.save(),f._applyTransform(this,g),g.beginPath(),g.rect(d,e,h,i),g.clip(),g.reset()),this.children.each(function(d){d[b](a,c)}),j&&g.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function a(a){a.fill()}function b(a){a.stroke()}function c(a){a.fill()}function d(a){a.stroke()}function e(){this._clearCache(f)}var f="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(f){this.nodeType="Shape",this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=c,this._strokeFuncHit=d;for(var g,h=Kinetic.shapes;;)if(g=Kinetic.Util.getRandomColor(),g&&!(g in h))break;this.colorKey=g,h[g]=this,Kinetic.Node.call(this,f),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",e)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(f,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},intersects:function(a){var b,c=this.getStage(),d=c.bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,b[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,b){var c,d,e,f=this.getLayer(),g=a||f.getCanvas(),h=g.getContext(),i=this._cache.canvas,j=this.sceneFunc(),k=this.hasShadow();return this.isVisible()&&(i?this._drawCachedSceneCanvas(h):j&&(h.save(),this._useBufferCanvas()?(c=this.getStage(),d=c.bufferCanvas,e=d.getContext(),e.clear(),e.save(),e._applyLineJoin(this),f._applyTransform(this,e,b),j.call(this,e),e.restore(),k&&(h.save(),h._applyShadow(this),h.drawImage(d._canvas,0,0),h.restore()),h._applyOpacity(this),h.drawImage(d._canvas,0,0)):(h._applyLineJoin(this),f._applyTransform(this,h,b),k&&(h.save(),h._applyShadow(this),j.call(this,h),h.restore()),h._applyOpacity(this),j.call(this,h)),h.restore())),this},drawHit:function(a,b){var c=this.getLayer(),d=a||c.hitCanvas,e=d.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._cache.canvas,h=g&&g.hit;return this.shouldDrawHit()&&(h?this._drawCachedHitCanvas(e):f&&(e.save(),e._applyLineJoin(this),c._applyTransform(this,e,b),f.call(this,e),e.restore())),this},drawHitFromCache:function(a){var b,c,d,e,f,g,h,i,j=a||0,k=this._cache.canvas,l=this._getCachedSceneCanvas(),m=l.getContext(),n=k.hit,o=n.getContext(),p=l.getWidth(),q=l.getHeight();o.clear();try{for(b=m.getImageData(0,0,p,q),c=b.data,d=o.getImageData(0,0,p,q),e=d.data,f=c.length,g=Kinetic.Util._hexToRgb(this.colorKey),h=0;f>h;h+=4)i=c[h+3],i>j&&(e[h]=g.r,e[h+1]=g.g,e[h+2]=g.b,e[h+3]=255);o.putImageData(d,0,0)}catch(r){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+r.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function a(a,b){a.content.addEventListener(b,function(c){a[I+b](c)},!1)}var b="Stage",c="string",d="px",e="mouseout",f="mouseleave",g="mouseover",h="mouseenter",i="mousemove",j="mousedown",k="mouseup",l="click",m="dblclick",n="touchstart",o="touchend",p="tap",q="dbltap",r="touchmove",s="contentMouseout",t="contentMouseover",u="contentMousemove",v="contentMousedown",w="contentMouseup",x="contentClick",y="contentDblclick",z="contentTouchstart",A="contentTouchend",B="contentDbltap",C="contentTouchmove",D="div",E="relative",F="inline-block",G="kineticjs-content",H=" ",I="_",J="container",K="",L=[j,i,k,e,n,r,o,g],M=L.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType=b,Kinetic.Container.call(this,a),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(a){if(typeof a===c){var b=a;if(a=Kinetic.document.getElementById(a),!a)throw"Can not find container in document with id "+b}return this._setAttr(J,a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,b=this.children,c=b.length;for(a=0;c>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement(D),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this),a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);var b=Kinetic.stages.indexOf(this);b>-1&&Kinetic.stages.splice(b,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(a){function b(e){var f=i[e],j=f.toDataURL(),k=new Kinetic.window.Image;k.onload=function(){h.drawImage(k,0,0),e<i.length-1?b(e+1):a.callback(g.toDataURL(c,d))},k.src=j}a=a||{};var c=a.mimeType||null,d=a.quality||null,e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),h=g.getContext()._context,i=this.children;(e||f)&&h.translate(-1*e,-1*f),b(0)},toImage:function(a){var b=a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})},this.toDataURL(a)},getIntersection:function(a){var b,c,d=this.getChildren(),e=d.length,f=e-1;for(b=f;b>=0;b--)if(c=d[b].getIntersection(a))return c;return null},_resizeDOM:function(){if(this.content){var a,b,c=this.getWidth(),e=this.getHeight(),f=this.getChildren(),g=f.length;for(this.content.style.width=c+d,this.content.style.height=e+d,this.bufferCanvas.setSize(c,e),this.bufferHitCanvas.setSize(c,e),a=0;g>a;a++)b=f[a],b.getCanvas().setSize(c,e),b.hitCanvas.setSize(c,e),b.draw()}},add:function(a){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var b=0;M>b;b++)a(this,L[b])},_mouseover:function(a){Kinetic.UA.mobile||(this._setPointerPosition(a),this._fire(t,{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble(e,{evt:a}),b._fireAndBubble(f,{evt:a}),this.targetShape=null),this.pointerPos=void 0,this._fire(s,{evt:a})}},_mousemove:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===c._id?c._fireAndBubble(i,{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble(e,{evt:a},c),this.targetShape._fireAndBubble(f,{evt:a},c)),c._fireAndBubble(g,{evt:a},this.targetShape),c._fireAndBubble(h,{evt:a},this.targetShape),this.targetShape=c):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(e,{evt:a}),this.targetShape._fireAndBubble(f,{evt:a}),this.targetShape=null),this._fire(u,{evt:a}),b&&b._drag(a)}a.preventDefault&&a.preventDefault()},_mousedown:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.clickStartShape=b,b._fireAndBubble(j,{evt:a})),this._fire(v,{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=this.clickStartShape,d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(k,{evt:a}),Kinetic.listenClickTap&&c&&c._id===b._id&&(b._fireAndBubble(l,{evt:a}),d&&b._fireAndBubble(m,{evt:a}))),this._fire(w,{evt:a}),Kinetic.listenClickTap&&(this._fire(x,{evt:a}),d&&this._fire(y,{evt:a})),Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.tapStartShape=b,b._fireAndBubble(n,{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(z,{evt:a})},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=!1;Kinetic.inDblClickWindow?(c=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(o,{evt:a}),Kinetic.listenClickTap&&b._id===this.tapStartShape._id&&(b._fireAndBubble(p,{evt:a}),c&&b._fireAndBubble(q,{evt:a})),b.isListening()&&a.preventDefault&&a.preventDefault()),Kinetic.listenClickTap&&(this._fire(A,{evt:a}),c&&this._fire(B,{evt:a})),Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()&&(c._fireAndBubble(r,{evt:a}),c.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(C,{evt:a}),b&&b._drag(a)},_setPointerPosition:function(a){var b,c=this._getContentPosition(),d=a.offsetX,e=a.clientX,f=null,g=null;a=a?a:window.event,void 0!==a.touches?a.touches.length>0&&(b=a.touches[0],f=b.clientX-c.left,g=b.clientY-c.top):void 0!==d?(f=d,g=a.offsetY):"mozilla"===Kinetic.UA.browser?(f=a.layerX,g=a.layerY):void 0!==e&&c&&(f=e-c.left,g=a.clientY-c.top),null!==f&&null!==g&&(this.pointerPos={x:f,y:g})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";a=Kinetic.document.createElement(D)}a.innerHTML=K,this.content=Kinetic.document.createElement(D),this.content.style.position=E,this.content.style.display=F,this.content.className=G,this.content.setAttribute("role","presentation"),a.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(a,b){var c,d,e=a.split(H),f=e.length;for(c=0;f>c;c++)d=e[c],this.content.addEventListener(d,b,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(a){this.nodeType="Layer",Kinetic.Container.call(this,a)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setZIndex:function(a){Kinetic.Node.prototype.setZIndex.call(this,a);var b=this.getStage();return b&&(b.content.removeChild(this.getCanvas()._canvas),a<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[a+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),a.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),this.index<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var a=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),a&&a.parentNode&&Kinetic.Util._isInDocument(a)&&a.parentNode.removeChild(a),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var a="#",b="beforeDraw",c="draw",d=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],e=d.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,a)},_setCanvasSize:function(a,b){this.canvas.setSize(a,b),this.hitCanvas.setSize(a,b)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(a){var b,c,f,g;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(c=0;e>c;c++){if(f=d[c],b=this._getIntersection({x:a.x+f.x,y:a.y+f.y}),g=b.shape)return g;if(!b.antialiased)return null}},_getIntersection:function(b){var c,d,e=this.hitCanvas.context._context.getImageData(b.x,b.y,1,1).data,f=e[3];return 255===f?(c=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),d=Kinetic.shapes[a+c],{shape:d}):f>0?{antialiased:!0}:{}},drawScene:function(a,d){var e=this.getLayer(),f=a||e&&e.getCanvas();return this._fire(b,{node:this}),this.getClearBeforeDraw()&&f.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,f,d),this._fire(c,{node:this}),this},_applyTransform:function(a,b,c){var d=a.getAbsoluteTransform(c).getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas;return c&&c.getClearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,d,b),this},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),a?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,a)},_validateAdd:function(a){var b=a.getType();"Shape"!==b&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(a,b){this.canvas.setSize(a,b)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(a){var b=this.getLayer(),c=a||b&&b.getCanvas();return this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c),this},_applyTransform:function(a,b,c){if(!c||c._id!==this._id){var d=a.getTransform().getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])}},draw:function(){return this.drawScene(),this},clear:function(a){return this.getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),this.getCanvas()._canvas.style.display=a?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(a){this.nodeType="Group",Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(a){this.___init(a)},Kinetic.Rect.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getCornerRadius(),c=this.getWidth(),d=this.getHeight();a.beginPath(),b?(a.moveTo(b,0),a.lineTo(c-b,0),a.arc(c-b,b,b,3*Math.PI/2,0,!1),a.lineTo(c,d-b),a.arc(c-b,d-b,b,0,Math.PI/2,!1),a.lineTo(b,d),a.arc(b,d-b,b,Math.PI/2,Math.PI,!1),a.lineTo(0,b),a.arc(b,b,b,Math.PI,3*Math.PI/2,!1)):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var a=2*Math.PI-1e-4,b="Circle";Kinetic.Circle=function(a){this.___init(a)},Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,a,!1),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius(a/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var a=2*Math.PI-1e-4,b="Ellipse";Kinetic.Ellipse=function(a){this.___init(a)},Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var c=this.getRadius(),d=c.x,e=c.y;b.beginPath(),b.save(),d!==e&&b.scale(1,e/d),b.arc(0,0,d,0,a,!1),b.restore(),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius({y:a/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var a=2*Math.PI-1e-4;Kinetic.Ring=function(a){this.___init(a)},Kinetic.Ring.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getInnerRadius(),0,a,!1),b.moveTo(this.getOuterRadius(),0),b.arc(0,0,this.getOuterRadius(),a,0,!0),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setOuterRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setOuterRadius(a/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(a){this.___init(a)},Kinetic.Wedge.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180;Kinetic.Arc=function(a){this.___init(a)},Kinetic.Arc.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=Kinetic.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.getOuterRadius(),0,b,c),a.arc(0,0,this.getInnerRadius(),b,0,!c),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var a="Image";Kinetic.Image=function(a){this.___init(a)},Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=a,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(a){var b,c,d,e,f=this.getWidth(),g=this.getHeight(),h=this.getImage();h&&(b=this.getCrop(),c=b.width,d=b.height,e=c&&d?[h,b.x,b.y,c,d,0,0,f,g]:[h,0,0,f,g]),a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillStrokeShape(this),h&&a.drawImage.apply(a,e)},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},getWidth:function(){var a=this.getImage();return this.attrs.width||(a?a.width:0)},getHeight:function(){var a=this.getImage();return this.attrs.height||(a?a.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="auto",d="center",e="Change.kinetic",f="2d",g="-",h="",i="left",j="text",k="Text",l="middle",m="normal",n="px ",o=" ",p="right",q="word",r="char",s="none",t=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],u=t.length,v=Kinetic.Util.createCanvasElement().getContext(f);Kinetic.Text=function(a){this.___init(a)},Kinetic.Text.prototype={___init:function(d){var f=this;void 0===d.width&&(d.width=c),void 0===d.height&&(d.height=c),Kinetic.Shape.call(this,d),this._fillFunc=a,this._strokeFunc=b,this.className=k;for(var g=0;u>g;g++)this.on(t[g]+e,f._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b,c=this.getPadding(),e=this.getTextHeight(),f=this.getLineHeight()*e,g=this.textArr,h=g.length,j=this.getWidth();for(a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",l),a.setAttr("textAlign",i),a.save(),a.translate(c,0),a.translate(0,c+e/2),b=0;h>b;b++){var k=g[b],m=k.text,n=k.width;a.save(),this.getAlign()===p?a.translate(j-n-2*c,0):this.getAlign()===d&&a.translate((j-n-2*c)/2,0),this.partialText=m,a.fillStrokeShape(this),a.restore(),a.translate(0,f)}a.restore()},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},setText:function(a){var b=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr(j,b),this},getWidth:function(){return this.attrs.width===c?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===c?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,c=v,d=this.getFontSize();return c.save(),c.font=this._getContextFont(),b=c.measureText(a),c.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+o+this.getFontVariant()+o+this.getFontSize()+n+this.getFontFamily()},_addTextLine:function(a,b){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return v.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,f=this.attrs.width,h=this.attrs.height,i=f!==c,j=h!==c,k=this.getPadding(),l=f-2*k,m=h-2*k,n=0,p=this.getWrap(),q=p!==s,t=p!==r&&q;this.textArr=[],v.save(),v.font=this._getContextFont();
for(var u=0,w=a.length;w>u;++u){var x=a[u],y=this._getTextWidth(x);if(i&&y>l)for(;x.length>0;){for(var z=0,A=x.length,B="",C=0;A>z;){var D=z+A>>>1,E=x.slice(0,D+1),F=this._getTextWidth(E);l>=F?(z=D+1,B=E,C=F):A=D}if(!B)break;if(t){var G=Math.max(B.lastIndexOf(o),B.lastIndexOf(g))+1;G>0&&(z=G,B=B.slice(0,z),C=this._getTextWidth(B))}if(this._addTextLine(B,C),d=Math.max(d,C),n+=e,!q||j&&n+e>m)break;if(x=x.slice(z),x.length>0&&(y=this._getTextWidth(x),l>=y)){this._addTextLine(x,y),n+=e,d=Math.max(d,y);break}}else this._addTextLine(x,y),n+=e,d=Math.max(d,y);if(j&&n+e>m)break}v.restore(),this.textHeight=b,this.textWidth=d}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",i),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",q),Kinetic.Factory.addGetter(Kinetic.Text,"text",h),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(a){this.___init(a)},Kinetic.Line.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.getPoints(),f=e.length,g=this.getTension(),h=this.getClosed();if(a.beginPath(),a.moveTo(e[0],e[1]),0!==g&&f>4){for(b=this.getTensionPoints(),c=b.length,d=h?0:4,h||a.quadraticCurveTo(b[0],b[1],b[2],b[3]);c-2>d;)a.bezierCurveTo(b[d++],b[d++],b[d++],b[d++],b[d++],b[d++]);h||a.quadraticCurveTo(b[c-2],b[c-1],e[f-2],e[f-1])}else for(d=2;f>d;d+=2)a.lineTo(e[d],e[d+1]);h?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var a=this.getPoints(),b=a.length,c=this.getTension(),d=Kinetic.Util,e=d._getControlPoints(a[b-2],a[b-1],a[0],a[1],a[2],a[3],c),f=d._getControlPoints(a[b-4],a[b-3],a[b-2],a[b-1],a[0],a[1],c),g=Kinetic.Util._expandPoints(a,c),h=[e[2],e[3]].concat(g).concat([f[0],f[1],a[b-2],a[b-1],f[2],f[3],e[0],e[1],a[0],a[1]]);return h}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(a){this.___init(a)},Kinetic.Sprite.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+0],g=e[d+1],h=e[d+2],i=e[d+3],j=this.getImage();j&&a.drawImage(j,f,g,h,i,0,0,h,i)},_hitFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+2],g=e[d+3];a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.getFrameRate())},start:function(){var a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var a=this.frameIndex(),b=this.getAnimation(),c=this.getAnimations(),d=c[b],e=d.length/4;this.frameIndex(e-1>a?a+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(a){this.___init(a)},Kinetic.Path.prototype={___init:function(a){this.dataArray=[];var b=this;Kinetic.Shape.call(this,a),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){b.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.dataArray,c=!1;a.beginPath();for(var d=0;d<b.length;d++){var e=b[d].command,f=b[d].points;switch(e){case"L":a.lineTo(f[0],f[1]);break;case"M":a.moveTo(f[0],f[1]);break;case"C":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case"z":a.closePath(),c=!0}}c?a.fillStrokeShape(this):a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Kinetic.Path.getPointOnLine=function(a,b,c,d,e,f,g){void 0===f&&(f=b),void 0===g&&(g=c);var h=(e-c)/(d-b+1e-8),i=Math.sqrt(a*a/(1+h*h));b>d&&(i*=-1);var j,k=h*i;if(d===b)j={x:f,y:g+k};else if((g-c)/(f-b+1e-8)===h)j={x:f+i,y:g+k};else{var l,m,n=this.getLineLength(b,c,d,e);if(1e-8>n)return void 0;var o=(f-b)*(d-b)+(g-c)*(e-c);o/=n*n,l=b+o*(d-b),m=c+o*(e-c);var p=this.getLineLength(f,g,l,m),q=Math.sqrt(a*a-p*p);i=Math.sqrt(q*q/(1+h*h)),b>d&&(i*=-1),k=h*i,j={x:l+i,y:m+k}}return j},Kinetic.Path.getPointOnCubicBezier=function(a,b,c,d,e,f,g,h,i){function j(a){return a*a*a}function k(a){return 3*a*a*(1-a)}function l(a){return 3*a*(1-a)*(1-a)}function m(a){return(1-a)*(1-a)*(1-a)}var n=h*j(a)+f*k(a)+d*l(a)+b*m(a),o=i*j(a)+g*k(a)+e*l(a)+c*m(a);return{x:n,y:o}},Kinetic.Path.getPointOnQuadraticBezier=function(a,b,c,d,e,f,g){function h(a){return a*a}function i(a){return 2*a*(1-a)}function j(a){return(1-a)*(1-a)}var k=f*h(a)+d*i(a)+b*j(a),l=g*h(a)+e*i(a)+c*j(a);return{x:k,y:l}},Kinetic.Path.getPointOnEllipticalArc=function(a,b,c,d,e,f){var g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}},Kinetic.Path.parsePathData=function(a){if(!a)return[];var b=a,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];b=b.replace(new RegExp(" ","g"),",");for(var d=0;d<c.length;d++)b=b.replace(new RegExp(c[d],"g"),"|"+c[d]);var e=b.split("|"),f=[],g=0,h=0;for(d=1;d<e.length;d++){var i=e[d],j=i.charAt(0);i=i.slice(1),i=i.replace(new RegExp(",-","g"),"-"),i=i.replace(new RegExp("-","g"),",-"),i=i.replace(new RegExp("e,-","g"),"e-");var k=i.split(",");k.length>0&&""===k[0]&&k.shift();for(var l=0;l<k.length;l++)k[l]=parseFloat(k[l]);for(;k.length>0&&!isNaN(k[0]);){var m,n,o,p,q,r,s,t,u,v,w=null,x=[],y=g,z=h;switch(j){case"l":g+=k.shift(),h+=k.shift(),w="L",x.push(g,h);break;case"L":g=k.shift(),h=k.shift(),x.push(g,h);break;case"m":var A=k.shift(),B=k.shift();if(g+=A,h+=B,w="M",f.length>2&&"z"===f[f.length-1].command)for(var C=f.length-2;C>=0;C--)if("M"===f[C].command){g=f[C].points[0]+A,h=f[C].points[1]+B;break}x.push(g,h),j="l";break;case"M":g=k.shift(),h=k.shift(),w="M",x.push(g,h),j="L";break;case"h":g+=k.shift(),w="L",x.push(g,h);break;case"H":g=k.shift(),w="L",x.push(g,h);break;case"v":h+=k.shift(),w="L",x.push(g,h);break;case"V":h=k.shift(),w="L",x.push(g,h);break;case"C":x.push(k.shift(),k.shift(),k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"c":x.push(g+k.shift(),h+k.shift(),g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"S":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,k.shift(),k.shift()),g=k.shift(),h=k.shift(),w="C",x.push(g,h);break;case"s":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"Q":x.push(k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"q":x.push(g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="Q",x.push(g,h);break;case"T":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g=k.shift(),h=k.shift(),w="Q",x.push(n,o,g,h);break;case"t":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g+=k.shift(),h+=k.shift(),w="Q",x.push(n,o,g,h);break;case"A":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g=k.shift(),h=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r);break;case"a":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g+=k.shift(),h+=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r)}f.push({command:w||j,points:x,start:{x:y,y:z},pathLength:this.calcLength(y,z,w||j,x)})}("z"===j||"Z"===j)&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f},Kinetic.Path.calcLength=function(a,b,c,d){var e,f,g,h,i=Kinetic.Path;switch(c){case"L":return i.getLineLength(a,b,d[0],d[1]);case"C":for(e=0,f=i.getPointOnCubicBezier(0,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),h=.01;1>=h;h+=.01)g=i.getPointOnCubicBezier(h,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"Q":for(e=0,f=i.getPointOnQuadraticBezier(0,a,b,d[0],d[1],d[2],d[3]),h=.01;1>=h;h+=.01)g=i.getPointOnQuadraticBezier(h,a,b,d[0],d[1],d[2],d[3]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"A":e=0;var j=d[4],k=d[5],l=d[4]+k,m=Math.PI/180;if(Math.abs(j-l)<m&&(m=Math.abs(j-l)),f=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],j,0),0>k)for(h=j-m;h>l;h-=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(h=j+m;l>h;h+=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],l,0),e+=i.getLineLength(f.x,f.y,g.x,g.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(a,b,c,d,e,f,g,h,i){var j=i*(Math.PI/180),k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));var n=Math.sqrt((g*g*h*h-g*g*l*l-h*h*k*k)/(g*g*l*l+h*h*k*k));e===f&&(n*=-1),isNaN(n)&&(n=0);var o=n*g*l/h,p=n*-h*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return t(w,x)<=-1&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1===f&&0>y&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="",d="normal";Kinetic.TextPath=function(a){this.___init(a)},Kinetic.TextPath.prototype={___init:function(c){var d=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,c),this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=a,this._strokeFuncHit=b,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d._setTextData),d._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline","middle"),a.setAttr("textAlign","left"),a.save();for(var b=this.glyphInfo,c=0;c<b.length;c++){a.save();var d=b[c].p0;a.translate(d.x,d.y),a.rotate(b[c].rotation),this.partialText=b[c].text,a.fillStrokeShape(this),a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas,c=b.getContext("2d");c.save(),c.font=this._getContextFont();var d=c.measureText(a);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width,this.textHeight=b.height,this.glyphInfo=[];for(var c,d,e,f=this.attrs.text.split(""),g=-1,h=0,i=function(){h=0;for(var b=a.dataArray,d=g+1;d<b.length;d++){if(b[d].pathLength>0)return g=d,b[d];"M"==b[d].command&&(c={x:b[d].points[0],y:b[d].points[1]})}return{}},j=function(b){var f=a._getTextSize(b).width,g=0,j=0;for(d=void 0;Math.abs(f-g)/f>.01&&25>j;){j++;for(var k=g;void 0===e;)e=i(),e&&k+e.pathLength<f&&(k+=e.pathLength,e=void 0);if(e==={}||void 0===c)return void 0;var l=!1;switch(e.command){case"L":Kinetic.Path.getLineLength(c.x,c.y,e.points[0],e.points[1])>f?d=Kinetic.Path.getPointOnLine(f,c.x,c.y,e.points[0],e.points[1],c.x,c.y):e=void 0;break;case"A":var m=e.points[4],n=e.points[5],o=e.points[4]+n;0===h?h=m+1e-8:f>g?h+=Math.PI/180*n/Math.abs(n):h-=Math.PI/360*n/Math.abs(n),(0>n&&o>h||n>=0&&h>o)&&(h=o,l=!0),d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],h,e.points[6]);break;case"C":0===h?h=f>e.pathLength?1e-8:f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnCubicBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case"Q":0===h?h=f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnQuadraticBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(g=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y)),l&&(l=!1,e=void 0)}},k=0;k<f.length&&(j(f[k]),void 0!==c&&void 0!==d);k++){var l=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y),m=0,n=Kinetic.Path.getPointOnLine(m+l/2,c.x,c.y,d.x,d.y),o=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:n.x,transposeY:n.y,text:f[k],rotation:o,p0:c,p1:d}),c=d}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",d),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",c),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(a){this.___init(a)},Kinetic.RegularPolygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.attrs.sides,f=this.attrs.radius;for(a.beginPath(),a.moveTo(0,0-f),b=1;e>b;b++)c=f*Math.sin(2*b*Math.PI/e),d=-1*f*Math.cos(2*b*Math.PI/e),a.lineTo(c,d);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(a){this.___init(a)},Kinetic.Star.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(var e=1;2*d>e;e++){var f=e%2===0?c:b,g=f*Math.sin(e*Math.PI/d),h=-1*f*Math.cos(e*Math.PI/d);a.lineTo(g,h)}a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],b="Change.kinetic",c="none",d="up",e="right",f="down",g="left",h="Label",i=a.length;Kinetic.Label=function(a){this.____init(a)},Kinetic.Label.prototype={____init:function(a){var b=this;this.className=h,Kinetic.Group.call(this,a),this.on("add.kinetic",function(a){b._addListeners(a.child),b._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(c){var d,e=this,f=function(){e._sync()};for(d=0;i>d;d++)c.on(a[d]+b,f)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,c,h,i,j,k,l=this.getText(),m=this.getTag();if(l&&m){switch(a=l.getWidth(),b=l.getHeight(),c=m.getPointerDirection(),h=m.getPointerWidth(),k=m.getPointerHeight(),i=0,j=0,c){case d:i=a/2,j=-1*k;break;case e:i=a+h,j=b/2;break;case f:i=a/2,j=b+k;break;case g:i=-1*h,j=b/2}m.setAttrs({x:-1*i,y:-1*j,width:a,height:b}),l.setAttrs({x:-1*i,y:-1*j})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(a){this.___init(a)},Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getWidth(),c=this.getHeight(),h=this.getPointerDirection(),i=this.getPointerWidth(),j=this.getPointerHeight();a.beginPath(),a.moveTo(0,0),h===d&&(a.lineTo((b-i)/2,0),a.lineTo(b/2,-1*j),a.lineTo((b+i)/2,0)),a.lineTo(b,0),h===e&&(a.lineTo(b,(c-j)/2),a.lineTo(b+i,c/2),a.lineTo(b,(c+j)/2)),a.lineTo(b,c),h===f&&(a.lineTo((b+i)/2,c),a.lineTo(b/2,c+j),a.lineTo((b-i)/2,c)),a.lineTo(0,c),h===g&&(a.lineTo(0,(c+j)/2),a.lineTo(-1*i,c/2),a.lineTo(0,(c-j)/2)),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",c),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}();
window.onload = function() {
   var color;

  var stage = new Kinetic.Stage({
    container: "kinetic",
    width: 900,
    height: 900,
    fill: "white"
  });

  var layer = new Kinetic.Layer();

    for(var i=0;i<datas.length;i++)
    {
        var path = new Kinetic.Path({
        stroke: 'black',
        fill: 'white',
        data: datas[i].path
      });
        path.on("click", function(){
        	this.setFill(color);
        	this.getLayer().draw();
        });
    	layer.add(path);
    }



    for(var i=0;i<maPalette.length;i++)
    {
      var rect = new Kinetic.Rect({
      	x: 240+i*50,
  		y: 40+i*20,
        width: 100,
        height: 50,
        fill: maPalette[i],
        stroke: 'black',
        strokeWidth: 4
      });
            rect.on("click", function(){
        	color = this.fill();
        });
    layer.add(rect);
    }
       
/*var path1 = new Kinetic.Path({
  x: 240,
  y: 40,
  data: "m 3.71875,2.90625 0,181.78125 C 4.7540754,183.80264 5.7672529,182.86878 6.8125,182 c 3.881048,-3.22581 7.851689,-6.33241 11.9375,-9.3125 4.085811,-2.98009 8.289819,-5.83468 12.6875,-8.53125 4.397681,-2.69657 8.995842,-5.24975 13.8125,-7.625 4.816658,-2.37525 9.844758,-4.57762 15.1875,-6.59375 5.342742,-2.01613 10.942603,-3.94834 16.75,-5.71875 5.807397,-1.77041 11.850051,-3.36391 18.09375,-4.75 6.2437,-1.38609 12.6921,-2.54309 19.34375,-3.40625 3.32583,-0.43158 6.7025,-0.78764 10.125,-1.0625 3.4225,-0.27486 6.89063,-0.49294 10.40625,-0.59375 3.51562,-0.10081 7.08229,-0.0906 10.6875,0 3.60521,0.0906 7.24625,0.26323 10.9375,0.5625 3.69125,0.29927 7.41376,0.7247 11.1875,1.25 3.77374,0.5253 7.5848,1.16885 11.4375,1.9375 3.8527,0.76865 7.7594,1.65817 11.6875,2.6875 3.9281,1.02933 7.87503,2.19267 11.875,3.5 3.99997,1.30733 8.05671,2.74108 12.125,4.34375 4.06829,1.60267 8.14819,3.36593 12.28125,5.28125 8.26613,3.83065 16.4615,7.98438 24.59375,12.28125 8.13225,4.29687 16.22908,8.73286 24.3125,13.21875 8.08342,4.48589 16.16161,9.00857 24.28125,13.40625 8.11964,4.39768 16.25907,8.68649 24.5,12.71875 4.12046,2.01613 8.27077,3.97096 12.4375,5.84375 4.16673,1.87279 8.37012,3.64894 12.59375,5.34375 4.22363,1.69481 8.45883,3.29908 12.75,4.78125 4.29117,1.48217 8.63067,2.85887 13,4.09375 4.36933,1.23488 8.76062,2.32831 13.21875,3.28125 4.45813,0.95294 8.9737,1.76991 13.53125,2.40625 4.55755,0.63634 9.17614,1.08991 13.84375,1.375 4.66761,0.28509 9.39919,0.38206 14.1875,0.28125 4.78831,-0.10081 9.48382,-0.32843 14.09375,-0.65625 4.60993,-0.32782 9.13489,-0.75123 13.5625,-1.28125 4.42761,-0.53002 8.75865,-1.16758 13,-1.875 4.24135,-0.70742 8.38634,-1.48375 12.4375,-2.34375 4.05116,-0.86 7.98672,-1.79347 11.84375,-2.78125 3.85703,-0.98778 7.62229,-2.03424 11.28125,-3.125 7.31792,-2.18151 14.24798,-4.52419 20.75,-6.96875 6.50202,-2.44456 12.59539,-4.99086 18.25,-7.5 5.65461,-2.50914 10.88054,-4.99975 15.65625,-7.375 9.55141,-4.7505 17.30948,-9.03831 23.15625,-12.0625 2.92339,-1.5121 6.34318,-3.54492 10.125,-5.9375 3.78182,-2.39258 7.92818,-5.12626 12.21875,-8.09375 8.58115,-5.93498 17.8256,-12.72379 26.34375,-19.125 3.95271,-2.97038 3.72054,-2.9083 7.21875,-5.59375 l 0,-145.375 -636.84375,0 z",
  fill: 'black',
  scale: 2
});*/

/*var path2 = new Kinetic.Path({
  x: 240,
  y: 40,
  data:  "m 151.56392,66.840373 c 6.27272,-5.559912 10.54958,-8.126025 18.96072,-7.69834 8.41115,0.427686 20.52891,8.838835 18.81817,20.386345 -1.71074,11.54751 -11.83263,17.962793 -22.52477,17.67767 -10.69214,-0.285124 -14.99493,-7.888082 -14.69505,-8.997644 0.7128,-2.637394 1.18731,-3.726001 1.72192,-7.682093 -1.28306,9.26652 -4.56198,15.966927 -12.97313,17.535109 -8.41115,1.56818 -17.96279,-1.140496 -15.39668,-14.113625 -1.71074,14.541305 -6.70041,15.396685 -12.54544,17.820235 -5.84504,2.42355 -20.671472,0 -20.671472,-10.121895 C 90.547446,103.33621 79.28506,103.47877 76.291261,103.33621 73.297462,103.19365 60.752019,100.77009 60.609457,92.501506 60.466895,84.232919 69.020606,80.241187 77.431756,81.381682 66.597055,78.387883 66.311931,71.259791 67.02474,67.980868 67.73755,64.701945 74.72308,55.435425 85.415219,58.001538 80.995802,70.40442 87.981333,73.825904 87.981333,73.825904 81.195931,70.734266 84.437407,59.25039 86.9834,55.720549 90.020437,51.509909 101.21067,47.284941 108.36768,55.292863 102.239,46.939281 92.157382,52.382575 92.157382,52.382575 91.016887,45.539606 95.251987,30.914787 111.07635,29.63173 c 15.82437,-1.283057 22.38221,6.985531 23.52271,11.690072 1.14049,4.704541 -2.85124,9.836768 -5.55991,11.832633 7.55577,-5.987597 13.8285,-6.98553 21.09915,-3.278922 7.27065,3.706608 7.98346,11.975195 7.98346,11.975195 -4.74018,3.06508 -6.55784,4.989665 -6.55784,4.989665 z"
  fill: 'black',
  scale: 2
});*/
      stage.add(layer);
//calque.add(forme);
//scene.add(calque);
};